<!DOCTYPE html>
<html lang="en"><head>
<script src="ordenacoes_intro_files/libs/clipboard/clipboard.min.js"></script>
<script src="ordenacoes_intro_files/libs/quarto-html/tabby.min.js"></script>
<script src="ordenacoes_intro_files/libs/quarto-html/popper.min.js"></script>
<script src="ordenacoes_intro_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="ordenacoes_intro_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ordenacoes_intro_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="ordenacoes_intro_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <meta name="author" content="Pedro Higuchi">
  <meta name="dcterms.date" content="2025-11-12">
  <title>Introdu√ß√£o √†s Ordena√ß√µes</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="ordenacoes_intro_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="ordenacoes_intro_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="ordenacoes_intro_files/libs/revealjs/dist/theme/quarto-f563837468303362081e247dddd440d0.css">
  <link href="ordenacoes_intro_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="ordenacoes_intro_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="ordenacoes_intro_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="ordenacoes_intro_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <link href="ordenacoes_intro_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
  <script src="ordenacoes_intro_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
  <script src="ordenacoes_intro_files/libs/viz-1.8.2/viz.js"></script>
  <link href="ordenacoes_intro_files/libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
  <script src="ordenacoes_intro_files/libs/grViz-binding-1.0.11/grViz.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Introdu√ß√£o √†s Ordena√ß√µes</h1>
  <p class="subtitle">Simplificando Dados Complexos de Vegeta√ß√£o</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Pedro Higuchi 
</div>
        <p class="quarto-title-affiliation">
            UDESC - Universidade do Estado de Santa Catarina
          </p>
    </div>
</div>

  <p class="date">2025-11-12</p>
</section>
<section id="o-que-vamos-aprender" class="slide level2">
<h2>O que vamos aprender ?</h2>
<p><strong>Ordena√ß√µes N√£o-Restritas (explora√ß√£o):</strong></p>
<ul>
<li>PCA, DCA, NMDS, PCoA</li>
</ul>
<p><strong>Ordena√ß√µes Restritas (teste de hip√≥teses):</strong></p>
<ul>
<li>RDA e CCA</li>
</ul>
<p><strong>An√°lises Avan√ßadas:</strong></p>
<ul>
<li>Parti√ß√£o da vari√¢ncia</li>
<li>Testes multivariados (PERMANOVA, betadisper)</li>
</ul>
<p><strong>Pr√°tica:</strong> Dados reais da Floresta com Arauc√°ria</p>
<p><strong>Objetivo: Do b√°sico ao avan√ßado em an√°lise multivariada!</strong> üìä‚Üíüìà</p>
</section>
<section id="o-problema" class="slide level2">
<h2>O Problema</h2>
<p>Imagine que voc√™ mediu:</p>
<ul>
<li><p>50 parcelas de floresta</p></li>
<li><p>90 esp√©cies diferentes de √°rvores</p></li>
<li><p>10 vari√°veis de solo em cada parcela</p></li>
</ul>
<p><strong>Pergunta: Como visualizar tudo isso em um gr√°fico?</strong> ü§î</p>
<p><strong>Resposta: N√£o d√°! S√£o muitas dimens√µes‚Ä¶</strong></p>
<p><strong>Solu√ß√£o: ORDENA√á√ÉO = resumir em 2 ou 3 dimens√µes que voc√™ pode ver!</strong></p>
</section>
<section id="analogia-√≠ndice-de-vegeta√ß√£o-ndvi" class="slide level2">
<h2>Analogia: √çndice de Vegeta√ß√£o (NDVI)</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Sensor multiespectral:</strong></p>
<ul>
<li>üî¥ Vermelho (RED)</li>
<li>üåø Infravermelho (NIR)</li>
<li>üîµ Azul, üü¢ Verde</li>
<li>Outras bandas‚Ä¶</li>
</ul>
<p><strong>‚Üí M√∫ltiplas dimens√µes</strong></p>
</div><div class="column" style="width:50%;">
<p><strong>√çndice NDVI:</strong></p>
<p><span class="math display">\[NDVI = \frac{NIR - RED}{NIR + RED}\]</span></p>
<ul>
<li>√önico n√∫mero (-1 a +1)</li>
<li>Resume ‚Äúsa√∫de vegetal‚Äù</li>
</ul>
<p><strong>‚Üí 10+ bandas ‚Üí 1 √≠ndice</strong></p>
</div></div>
<p>NDVI resume bandas espectrais | PCA resume dados ambientais por exemplo</p>
<p><strong>10 Vari√°veis ambientais ‚Üí PC1 e PC2</strong> üå≤</p>
</section>
<section id="o-que-descobrimos-com-ordena√ß√£o" class="slide level2">
<h2>O que descobrimos com ordena√ß√£o?</h2>
<ul>
<li><p>Parcelas parecidas ficam pr√≥ximas no gr√°fico</p></li>
<li><p>Parcelas diferentes ficam distantes</p></li>
<li><p>Gradientes ambientais (fertilidade, altitude, umidade)</p></li>
<li><p>Grupos naturais de parcelas ou esp√©cies</p></li>
<li><p>Fatores mais importantes que explicam as diferen√ßas</p></li>
</ul>
</section>
<section id="nossos-dados-exemplo" class="slide level2">
<h2>Nossos Dados Exemplo</h2>
<p><strong>Floresta Ombr√≥fila Mista (Floresta com Arauc√°ria)</strong></p>
<p><strong>Vegeta√ß√£o:</strong></p>
<ul>
<li>50 parcelas</li>
<li>90 esp√©cies de √°rvores</li>
<li>2.837 indiv√≠duos</li>
<li>Esp√©cie principal: <em>Araucaria angustifolia</em></li>
</ul>
<p><strong>Ambiente:</strong></p>
<ul>
<li>pH do solo</li>
<li>Nutrientes (P, K, Ca, Mg)</li>
<li>Mat√©ria org√¢nica</li>
<li>Altitude</li>
<li>Declividade</li>
</ul>
</section>
<section id="dois-tipos-de-ordena√ß√£o" class="slide level2">
<h2>Dois Tipos de Ordena√ß√£o</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item" id="htmlwidget-6df632d0cb9fb3d3c987" style="width:960px;height:384px;"></div>
<script type="application/json" data-for="htmlwidget-6df632d0cb9fb3d3c987">{"x":{"diagram":"\ndigraph tipos {\n  graph [rankdir = LR, bgcolor = transparent]\n  node [shape = box, style = filled, fontname = Arial, fontsize = 14]\n  \n  A [label = \"Seus dados\", fillcolor = \"#2C5F2D\", fontcolor = white]\n  B [label = \"N√ÉO-RESTRITA\n\nBusca padr√µes\nlivremente\", fillcolor = \"lightblue\"]\n  C [label = \"RESTRITA\n\nTesta se vari√°veis\nexplicam padr√µes\", fillcolor = \"lightyellow\"]\n  \n  A -> B\n  A -> C\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><strong>Hoje vamos focar em ordena√ß√£o N√ÉO-RESTRITA (explora√ß√£o inicial)</strong></p>
</section>
<section id="pca---an√°lise-de-componentes-principais" class="slide level2">
<h2>PCA - An√°lise de Componentes Principais</h2>
<p><strong>Quando usar:</strong></p>
<ul>
<li>Dados ambientais (solo, clima, topografia)</li>
<li>Gradientes curtos (&lt; 3 SD)</li>
<li>Poucos zeros na matriz de dados</li>
</ul>
<p><strong>Ideia b√°sica: Encontra as dire√ß√µes de maior varia√ß√£o nos dados</strong></p>
</section>
<section id="o-que-s√£o-gradientes-curtos" class="slide level2">
<h2>O que s√£o Gradientes Curtos? üìè</h2>
<p><strong>Gradiente &lt; 3 SD = Condi√ß√µes ambientais homog√™neas</strong></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>EXEMPLO 1: Parcelas em encosta sul</strong></p>
<ul>
<li>Condi√ß√µes similares</li>
<li>Varia√ß√£o pequena</li>
</ul>
<pre><code>P1: pH 5.2, Ca 4.5, Alt 920m
P2: pH 5.5, Ca 5.1, Alt 935m
P3: pH 5.0, Ca 4.2, Alt 915m</code></pre>
<p>‚úÖ pH: 5.0-5.5 (varia√ß√£o 0.5)</p>
<p>‚úÖ Ca: 4.2-5.1 (varia√ß√£o 0.9)</p>
<p>‚úÖ Altitude similar</p>
</div><div class="column" style="width:50%;">
<p><strong>EXEMPLO 2: Topo, enconsta e baixada</strong></p>
<ul>
<li>Condi√ß√µes muito diferentes</li>
<li>Varia√ß√£o grande</li>
</ul>
<pre><code>P1: pH 6.5, Ca 12.5, Alt 850m
P15: pH 5.5, Ca 5.2, Alt 950m
P30: pH 4.0, Ca 1.2, Alt 1100m</code></pre>
<p>‚ùå pH: 4.0-6.5 (varia√ß√£o 2.5)</p>
<p>‚ùå Ca: 1.2-12.5 (varia√ß√£o 11.3)</p>
<p>‚ùå Altitude muito diferente</p>
</div></div>
</section>
<section id="entendendo-o-sd-desvio-padr√£o" class="slide level2">
<h2>Entendendo o SD (Desvio Padr√£o)</h2>
<p><strong>SD = Standard Deviation</strong> - unidade que mede a <strong>mudan√ßa nas condi√ß√µes ambientais</strong></p>
<p><strong>Interpreta√ß√£o pr√°tica com vari√°veis de solo:</strong></p>
<ul>
<li><strong>&lt; 3 SD</strong> = Condi√ß√µes variam pouco ‚Üí ambiente homog√™neo</li>
<li><strong>&gt; 4 SD</strong> = Condi√ß√µes variam muito ‚Üí ambiente heterog√™neo</li>
</ul>
</section>
<section id="entendendo-o-sd-desvio-padr√£o-1" class="slide level2">
<h2>Entendendo o SD (Desvio Padr√£o)</h2>
<p><strong>Exemplo comparativo:</strong></p>
<pre><code>Gradiente CURTO (2.5 SD):
pH:       5.0 ‚Üí 5.5 ‚Üí 5.2 ‚Üí 5.3  (varia√ß√£o: 0.5 unidades)
C√°lcio:   4.2 ‚Üí 5.1 ‚Üí 4.5 ‚Üí 4.8  (varia√ß√£o: 0.9 cmolc/kg)
Altitude: 915 ‚Üí 935 ‚Üí 920 ‚Üí 928  (varia√ß√£o: 20 m)
         ‚Üí Condi√ß√µes SIMILARES ‚úÖ Use PCA/RDA

Gradiente LONGO (5.0 SD):
pH:       6.5 ‚Üí 5.5 ‚Üí 4.0         (varia√ß√£o: 2.5 unidades)
C√°lcio:   12.5 ‚Üí 5.2 ‚Üí 1.2        (varia√ß√£o: 11.3 cmolc/kg)
Altitude: 850 ‚Üí 950 ‚Üí 1100        (varia√ß√£o: 250 m)
         ‚Üí Condi√ß√µes MUITO DIFERENTES ‚ùå Use DCA/CCA/NMDS</code></pre>
</section>
<section id="limita√ß√£o-importante-do-pca" class="slide level2">
<h2>‚ö†Ô∏è Limita√ß√£o Importante do PCA</h2>
<p><strong>PCA funciona mal com dados de vegeta√ß√£o porque:</strong></p>
<ul>
<li>Muitas esp√©cies ausentes = muitos zeros (50-80% da matriz)</li>
<li>Distribui√ß√µes assim√©tricas</li>
<li>Pressuposi√ß√£o de linearidade n√£o atendida</li>
</ul>
</section>
<section id="pca---exemplo-visual-passo-a-passo" class="slide level2">
<h2>PCA - Exemplo Visual Passo a Passo</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a><span class="co"># Criar dados simples (6 parcelas x 2 esp√©cies)</span></span>
<span id="cb4-2"><a href=""></a>raw <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="fl">2.5</span>, <span class="fl">2.5</span>, <span class="dv">1</span>, <span class="fl">0.5</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">1</span>), <span class="at">nrow =</span> <span class="dv">6</span>)</span>
<span id="cb4-3"><a href=""></a><span class="fu">colnames</span>(raw) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"s1"</span>, <span class="st">"s2"</span>)</span>
<span id="cb4-4"><a href=""></a><span class="fu">rownames</span>(raw) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"p1"</span>, <span class="st">"p2"</span>, <span class="st">"p3"</span>, <span class="st">"p4"</span>, <span class="st">"p5"</span>, <span class="st">"p6"</span>)</span>
<span id="cb4-5"><a href=""></a>raw</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    s1 s2
p1 1.0  0
p2 2.0  1
p3 2.5  2
p4 2.5  4
p5 1.0  3
p6 0.5  1</code></pre>
</div>
</div>
<p>Matriz de dados: 6 parcelas √ó 2 esp√©cies</p>
</section>
<section id="passo-1-dados-originais" class="slide level2">
<h2>PASSO 1: Dados Originais</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a><span class="fu">plot</span>(raw, <span class="at">type =</span> <span class="st">"b"</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">4</span>), <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-3-1.png" class="quarto-figure quarto-figure-center r-stretch" width="768"></section>
<section id="passo-2-dados-padronizados" class="slide level2">
<h2>PASSO 2: Dados Padronizados</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a><span class="co"># Dados brutos ‚Äúcentrados‚Äù (padronizados na mesma escala)</span></span>
<span id="cb7-2"><a href=""></a>cent <span class="ot">&lt;-</span> <span class="fu">scale</span>(raw, <span class="at">scale =</span> T)</span>
<span id="cb7-3"><a href=""></a><span class="fu">plot</span>(raw, <span class="at">type =</span> <span class="st">"b"</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">4</span>), <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>))</span>
<span id="cb7-4"><a href=""></a><span class="fu">lines</span>(cent, <span class="at">type =</span> <span class="st">"b"</span>, <span class="at">pch =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-4-1.png" class="quarto-figure quarto-figure-center r-stretch" width="768"></section>
<section id="passo-3-pca-eixos-rotacionados" class="slide level2">
<h2>PASSO 3: PCA (Eixos Rotacionados)</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="co"># PCA - Rotacionar eixos</span></span>
<span id="cb8-2"><a href=""></a><span class="fu">library</span>(vegan)</span>
<span id="cb8-3"><a href=""></a>o.pca <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(cent)</span>
<span id="cb8-4"><a href=""></a><span class="fu">scores</span>(o.pca)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           PC1        PC2
p1 -1.35966283 -0.4017469
p2 -0.05820754 -0.7424332
p3  0.83271234 -0.6725842
p4  1.79348126  0.2881847
p5  0.08149056  1.0394065
p6 -1.28981378  0.4891730</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a><span class="fu">plot</span>(raw, <span class="at">type =</span> <span class="st">"b"</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">4</span>), <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>))</span>
<span id="cb10-2"><a href=""></a><span class="fu">lines</span>(cent, <span class="at">type =</span> <span class="st">"b"</span>, <span class="at">pch =</span> <span class="dv">20</span>)</span>
<span id="cb10-3"><a href=""></a><span class="fu">lines</span>(<span class="fu">scores</span>(o.pca), <span class="at">type =</span> <span class="st">"b"</span>, <span class="at">pch =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-5-1.png" class="quarto-figure quarto-figure-center r-stretch" width="768"></section>
<section id="passo-4-biplot" class="slide level2">
<h2>PASSO 4: Biplot</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a><span class="fu">biplot</span>(o.pca)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-6-1.png" class="quarto-figure quarto-figure-center r-stretch" width="768"></section>
<section id="pca-com-dados-reais---solo-da-fom" class="slide level2">
<h2>PCA com Dados Reais - Solo da FOM</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a><span class="co"># Carregar dados de solo</span></span>
<span id="cb12-2"><a href=""></a>amb <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"../data/environmental_data.csv"</span>, </span>
<span id="cb12-3"><a href=""></a>                  <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">";"</span>, <span class="at">dec =</span> <span class="st">","</span>, </span>
<span id="cb12-4"><a href=""></a>                  <span class="at">row.names =</span> <span class="dv">1</span>)</span>
<span id="cb12-5"><a href=""></a></span>
<span id="cb12-6"><a href=""></a><span class="co"># Ver as primeiras linhas</span></span>
<span id="cb12-7"><a href=""></a><span class="fu">head</span>(amb, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  arg  ph   P   K Na  MO  hal   Al  Ca  Mg   CTCph7    CTCef         V
1  31 3.9 2.0  54  0 4.2 24.4 11.2 0.8 0.5 25.83846 37.03846  5.567133
2  27 4.2 1.7  95  0 7.3 19.4  6.1 2.8 1.2 23.64359 29.74359 17.948162
3  24 4.8 5.6 125  0 9.1  9.7  1.6 9.2 1.8 21.02051 22.62051 53.854599
         SB    cd cotmedia desmax decmed
1  1.438462 94.28  1000.25      4      8
2  4.243590 94.54  1009.25      5      9
3 11.320513 93.24  1014.50      4      9</code></pre>
</div>
</div>
</section>
<section id="executando-pca" class="slide level2">
<h2>Executando PCA</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a><span class="co"># Fazer PCA</span></span>
<span id="cb14-2"><a href=""></a>pca_solo <span class="ot">&lt;-</span> <span class="fu">rda</span>(amb, <span class="at">scale =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-3"><a href=""></a></span>
<span id="cb14-4"><a href=""></a><span class="co"># Quanto cada eixo explica?</span></span>
<span id="cb14-5"><a href=""></a><span class="fu">summary</span>(pca_solo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
rda(X = amb, scale = TRUE) 

Partitioning of correlations:
              Inertia Proportion
Total              18          1
Unconstrained      18          1

Eigenvalues, and their contribution to the correlations 

Importance of components:
                         PC1    PC2     PC3     PC4     PC5     PC6     PC7
Eigenvalue            8.8268 2.1053 1.47089 1.21485 1.13823 0.79450 0.69897
Proportion Explained  0.4904 0.1170 0.08172 0.06749 0.06323 0.04414 0.03883
Cumulative Proportion 0.4904 0.6073 0.68905 0.75654 0.81978 0.86392 0.90275
                          PC8     PC9    PC10    PC11     PC12     PC13
Eigenvalue            0.48973 0.42928 0.30179 0.23173 0.164537 0.080657
Proportion Explained  0.02721 0.02385 0.01677 0.01287 0.009141 0.004481
Cumulative Proportion 0.92996 0.95381 0.97057 0.98345 0.992587 0.997068
                          PC14      PC15
Eigenvalue            0.043958 0.0088237
Proportion Explained  0.002442 0.0004902
Cumulative Proportion 0.999510 1.0000000</code></pre>
</div>
</div>
</section>
<section id="o-que-s√£o-autovalores" class="slide level2">
<h2>O que s√£o Autovalores? üî¢</h2>
<p><strong>Autovalores</strong> medem <strong>quanto de varia√ß√£o</strong> cada eixo captura dos dados.</p>
</section>
<section id="executando-pca-1" class="slide level2">
<h2>Executando PCA</h2>
<ul>
<li>Os loadings mostram a correla√ß√£o entre cada vari√°vel original e os componentes principais!</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a><span class="co"># Loadings PCA</span></span>
<span id="cb16-2"><a href=""></a>loadings <span class="ot">&lt;-</span> <span class="fu">scores</span>(pca_solo, <span class="at">display =</span> <span class="st">"species"</span>, <span class="at">choices =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb16-3"><a href=""></a>loadings</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                PC1          PC2
arg      -0.2414695 -0.243726277
ph        1.2062885  0.120043974
P         0.6868190 -0.534306781
K         0.6857349  0.370407138
Na        0.8049970 -0.249722086
MO        0.6818968 -0.659944087
hal      -1.1726161 -0.357639041
Al       -1.0782134 -0.130638700
Ca        1.0193841 -0.387144031
Mg        0.9149885 -0.515201427
CTCph7   -0.6620791 -0.929701668
CTCef    -0.9614735 -0.722142386
V         1.2510646 -0.026751844
SB        1.1238388 -0.445070486
cd       -0.8864982  0.168675978
cotmedia -0.5742349 -0.546073313
desmax    0.7780676 -0.086667502
decmed    0.8180250 -0.008115826
attr(,"const")
[1] 5.449632</code></pre>
</div>
</div>
</section>
<section id="visualizar-pca---solo" class="slide level2">
<h2>Visualizar PCA - Solo</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a><span class="co"># Gr√°fico (biplot)</span></span>
<span id="cb18-2"><a href=""></a><span class="fu">biplot</span>(pca_solo, </span>
<span id="cb18-3"><a href=""></a>       <span class="at">main =</span> <span class="st">"PCA - Vari√°veis de Solo"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-10-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"><p><strong>Interpreta√ß√£o:</strong> Setas vermelhas = vari√°veis de solo | n√∫meros = parcelas</p>
</section>
<section id="como-interpretar-o-biplot" class="slide level2">
<h2>Como Interpretar o Biplot?</h2>
<ul>
<li><p><strong>Setas longas</strong> = vari√°vel importante</p></li>
<li><p><strong>Setas curtas</strong> = vari√°vel pouco importante</p></li>
<li><p><strong>Setas no mesmo sentido</strong> = correlacionadas (ex: Ca e Mg)</p></li>
<li><p><strong>Setas opostas</strong> = correla√ß√£o negativa (ex: pH e Al)</p></li>
<li><p><strong>Parcelas pr√≥ximas</strong> = solo parecido</p></li>
<li><p><strong>Parcelas distantes</strong> = solo diferente</p></li>
</ul>
</section>
<section id="nmds---para-dados-de-vegeta√ß√£o" class="slide level2">
<h2>NMDS - Para Dados de Vegeta√ß√£o</h2>
<p><strong>Quando a PCA n√£o funciona bem‚Ä¶</strong></p>
<p><strong>Problemas com dados de vegeta√ß√£o:</strong></p>
<ul>
<li>Muitas esp√©cies ausentes (zeros)</li>
<li>Distribui√ß√µes muito assim√©tricas</li>
<li>Gradientes muito longos</li>
</ul>
<p><strong>Solu√ß√£o: NMDS (Non-metric Multidimensional Scaling)</strong></p>
</section>
<section id="nmds---o-mais-flex√≠vel" class="slide level2">
<h2>NMDS - O Mais Flex√≠vel</h2>
<p><strong>Non-metric Multidimensional Scaling</strong></p>
<p><strong>Vantagens:</strong></p>
<ul>
<li>Funciona com qualquer tipo de dado</li>
<li>N√£o assume rela√ß√µes lineares</li>
<li>Muito usado em ecologia moderna</li>
<li>Robusto e confi√°vel</li>
</ul>
<p><strong>Avalia√ß√£o: Stress (quanto menor, melhor)</strong></p>
</section>
<section id="nmds-na-pr√°tica" class="slide level2">
<h2>NMDS na Pr√°tica</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href=""></a><span class="co"># Fazer NMDS</span></span>
<span id="cb19-2"><a href=""></a><span class="co"># Carregar dados de vegeta√ß√£o</span></span>
<span id="cb19-3"><a href=""></a>veg <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"../data/vegetation_data.csv"</span>,</span>
<span id="cb19-4"><a href=""></a>                  <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">";"</span>, <span class="at">dec =</span> <span class="st">","</span>)</span>
<span id="cb19-5"><a href=""></a></span>
<span id="cb19-6"><a href=""></a><span class="co"># Criar matriz: parcelas (linhas) x esp√©cies (colunas)</span></span>
<span id="cb19-7"><a href=""></a>matriz <span class="ot">&lt;-</span> <span class="fu">as.data.frame.matrix</span>(<span class="fu">table</span>(veg<span class="sc">$</span>PC, veg<span class="sc">$</span>Species))</span>
<span id="cb19-8"><a href=""></a></span>
<span id="cb19-9"><a href=""></a><span class="co"># Criar vari√°vel de exposi√ß√£o</span></span>
<span id="cb19-10"><a href=""></a><span class="co"># 17 parcelas Norte + 33 parcelas Sul = 50 parcelas total</span></span>
<span id="cb19-11"><a href=""></a>exposicao <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"Norte"</span>, <span class="dv">17</span>), <span class="fu">rep</span>(<span class="st">"Sul"</span>, <span class="dv">33</span>))</span>
<span id="cb19-12"><a href=""></a></span>
<span id="cb19-13"><a href=""></a>nmds_result <span class="ot">&lt;-</span> <span class="fu">metaMDS</span>(matriz,</span>
<span id="cb19-14"><a href=""></a>                       <span class="at">k =</span> <span class="dv">2</span>,              <span class="co"># 2 dimens√µes</span></span>
<span id="cb19-15"><a href=""></a>                       <span class="at">distance =</span> <span class="st">"bray"</span>,  <span class="co"># √≠ndice de Bray-Curtis</span></span>
<span id="cb19-16"><a href=""></a>                       <span class="at">trymax =</span> <span class="dv">100</span>)       <span class="co"># tentativas</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Wisconsin double standardization
Run 0 stress 0.2953069 
Run 1 stress 0.2969591 
Run 2 stress 0.2946395 
... New best solution
... Procrustes: rmse 0.0265171  max resid 0.08937196 
Run 3 stress 0.3060852 
Run 4 stress 0.30622 
Run 5 stress 0.3114901 
Run 6 stress 0.2946375 
... New best solution
... Procrustes: rmse 0.0005369238  max resid 0.002179912 
... Similar to previous best
Run 7 stress 0.3029819 
Run 8 stress 0.3056149 
Run 9 stress 0.2989338 
Run 10 stress 0.2991449 
Run 11 stress 0.3021164 
Run 12 stress 0.2965245 
Run 13 stress 0.3017007 
Run 14 stress 0.299367 
Run 15 stress 0.2992786 
Run 16 stress 0.2939446 
... New best solution
... Procrustes: rmse 0.01549058  max resid 0.07858078 
Run 17 stress 0.3017203 
Run 18 stress 0.2951847 
Run 19 stress 0.3045032 
Run 20 stress 0.3011684 
Run 21 stress 0.2992507 
Run 22 stress 0.3023938 
Run 23 stress 0.3076788 
Run 24 stress 0.3036767 
Run 25 stress 0.2941875 
... Procrustes: rmse 0.01824387  max resid 0.07602765 
Run 26 stress 0.2991516 
Run 27 stress 0.3002002 
Run 28 stress 0.3010642 
Run 29 stress 0.3192588 
Run 30 stress 0.2976894 
Run 31 stress 0.3026143 
Run 32 stress 0.299426 
Run 33 stress 0.3014875 
Run 34 stress 0.3029777 
Run 35 stress 0.299644 
Run 36 stress 0.2941058 
... Procrustes: rmse 0.01625912  max resid 0.07704 
Run 37 stress 0.296844 
Run 38 stress 0.3010604 
Run 39 stress 0.3168067 
Run 40 stress 0.3096472 
Run 41 stress 0.3052914 
Run 42 stress 0.2981839 
Run 43 stress 0.2980335 
Run 44 stress 0.2999218 
Run 45 stress 0.3067347 
Run 46 stress 0.2990168 
Run 47 stress 0.300044 
Run 48 stress 0.3008567 
Run 49 stress 0.2962373 
Run 50 stress 0.2984549 
Run 51 stress 0.2977994 
Run 52 stress 0.30012 
Run 53 stress 0.3054439 
Run 54 stress 0.3003888 
Run 55 stress 0.3038481 
Run 56 stress 0.2995684 
Run 57 stress 0.3082838 
Run 58 stress 0.310071 
Run 59 stress 0.3012018 
Run 60 stress 0.3038585 
Run 61 stress 0.3100108 
Run 62 stress 0.3085963 
Run 63 stress 0.2942815 
... Procrustes: rmse 0.02157841  max resid 0.07954243 
Run 64 stress 0.3050001 
Run 65 stress 0.3057248 
Run 66 stress 0.2994357 
Run 67 stress 0.2939443 
... New best solution
... Procrustes: rmse 0.0004467395  max resid 0.002287483 
... Similar to previous best
*** Best solution repeated 1 times</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href=""></a><span class="co"># Avaliar qualidade</span></span>
<span id="cb21-2"><a href=""></a>stress <span class="ot">&lt;-</span> <span class="fu">round</span>(nmds_result<span class="sc">$</span>stress, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Stress: 0.294</strong></p>
<p><strong>‚úó Ruim</strong>, n√£o usar!</p>
</section>
<section id="visualizar-nmds" class="slide level2">
<h2>Visualizar NMDS</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a>fig.nmds <span class="ot">&lt;-</span> <span class="fu">ordiplot</span>(nmds_result, <span class="at">type =</span> <span class="st">"none"</span>, <span class="at">font =</span> <span class="dv">6</span>, <span class="at">font.lab =</span> <span class="dv">6</span>, <span class="at">cex.axis =</span> <span class="fl">1.2</span>, </span>
<span id="cb22-2"><a href=""></a>    <span class="at">cex.lab =</span> <span class="fl">1.2</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">1</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">1.5</span>, <span class="dv">1</span>))</span>
<span id="cb22-3"><a href=""></a><span class="fu">text</span>(fig.nmds, <span class="st">"sites"</span>, <span class="at">col =</span> <span class="st">"black"</span>, <span class="at">font =</span> <span class="dv">6</span>)</span>
<span id="cb22-4"><a href=""></a>stems <span class="ot">&lt;-</span> <span class="fu">colSums</span>(matriz)</span>
<span id="cb22-5"><a href=""></a>sel <span class="ot">&lt;-</span> <span class="fu">orditorp</span>(nmds_result, <span class="at">dis =</span> <span class="st">"sp"</span>, <span class="at">priority =</span> stems, <span class="at">pcol =</span> <span class="st">"black"</span>, <span class="at">pch =</span> <span class="st">"+"</span>, </span>
<span id="cb22-6"><a href=""></a>    <span class="at">cex =</span> <span class="fl">0.7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-13-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="visualizar-stress-plot" class="slide level2">
<h2>Visualizar Stress plot</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href=""></a><span class="fu">stressplot</span>(nmds_result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-14-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="testando-diferen√ßas-entre-grupos-no-pca" class="slide level2">
<h2>Testando Diferen√ßas Entre Grupos no PCA</h2>
<p><strong>Pergunta: Os setores (Norte/Sul) diferem ao longo do gradiente ambiental?</strong></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a><span class="co"># Extrair escores do PC1</span></span>
<span id="cb24-2"><a href=""></a>eixosPCA <span class="ot">&lt;-</span> <span class="fu">scores</span>(pca_solo, <span class="at">choices =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">display =</span> <span class="st">"sites"</span>)</span>
<span id="cb24-3"><a href=""></a>PCA1 <span class="ot">&lt;-</span> eixosPCA[,<span class="dv">1</span>]</span>
<span id="cb24-4"><a href=""></a></span>
<span id="cb24-5"><a href=""></a><span class="co"># Verificar normalidade</span></span>
<span id="cb24-6"><a href=""></a><span class="fu">shapiro.test</span>(PCA1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Shapiro-Wilk normality test

data:  PCA1
W = 0.98054, p-value = 0.575</code></pre>
</div>
</div>
<p><strong>Se p &gt; 0.05</strong> ‚Üí dados normais ‚úì | <strong>Se p &lt; 0.05</strong> ‚Üí usar teste n√£o-param√©trico</p>
</section>
<section id="comparando-setores---teste-t" class="slide level2">
<h2>Comparando Setores - Teste t</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href=""></a><span class="co"># Teste t (exposicao j√° foi criada anteriormente)</span></span>
<span id="cb26-2"><a href=""></a><span class="fu">t.test</span>(PCA1 <span class="sc">~</span> exposicao)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Welch Two Sample t-test

data:  PCA1 by exposicao
t = -3.8256, df = 36.281, p-value = 0.0004957
alternative hypothesis: true difference in means between group Norte and group Sul is not equal to 0
95 percent confidence interval:
 -1.1656423 -0.3580773
sample estimates:
mean in group Norte   mean in group Sul 
         -0.5028275           0.2590323 </code></pre>
</div>
</div>
<p><strong>p &lt; 0.05?</strong> ‚Üí Setores S√ÉO diferentes ambientalmente! ‚úì</p>
</section>
<section id="visualizando-grupos-no-nmds" class="slide level2">
<h2>Visualizando Grupos no NMDS</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href=""></a>fig <span class="ot">&lt;-</span> <span class="fu">ordiplot</span>(nmds_result, <span class="at">type =</span> <span class="st">"none"</span>)</span>
<span id="cb28-2"><a href=""></a></span>
<span id="cb28-3"><a href=""></a><span class="co"># Parcelas por grupo</span></span>
<span id="cb28-4"><a href=""></a><span class="fu">points</span>(fig, <span class="st">"sites"</span>, <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">col =</span> <span class="st">"blue"</span>, </span>
<span id="cb28-5"><a href=""></a>       <span class="at">select =</span> exposicao <span class="sc">==</span> <span class="st">"Norte"</span>)</span>
<span id="cb28-6"><a href=""></a><span class="fu">points</span>(fig, <span class="st">"sites"</span>, <span class="at">pch =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="st">"red"</span>, </span>
<span id="cb28-7"><a href=""></a>       <span class="at">select =</span> exposicao <span class="sc">==</span> <span class="st">"Sul"</span>)</span>
<span id="cb28-8"><a href=""></a></span>
<span id="cb28-9"><a href=""></a><span class="co"># Esp√©cies</span></span>
<span id="cb28-10"><a href=""></a>sp.names <span class="ot">&lt;-</span> <span class="fu">make.cepnames</span>(<span class="fu">colnames</span>(matriz))</span>
<span id="cb28-11"><a href=""></a>stems <span class="ot">&lt;-</span> <span class="fu">colSums</span>(matriz)</span>
<span id="cb28-12"><a href=""></a><span class="fu">orditorp</span>(nmds_result, <span class="st">"sp"</span>, <span class="at">label =</span> sp.names,</span>
<span id="cb28-13"><a href=""></a>         <span class="at">priority =</span> stems, <span class="at">pch =</span> <span class="st">"+"</span>, <span class="at">pcol =</span> <span class="st">"grey"</span>)</span>
<span id="cb28-14"><a href=""></a></span>
<span id="cb28-15"><a href=""></a><span class="fu">legend</span>(<span class="st">"topleft"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Norte"</span>, <span class="st">"Sul"</span>), </span>
<span id="cb28-16"><a href=""></a>       <span class="at">pch =</span> <span class="fu">c</span>(<span class="dv">19</span>, <span class="dv">1</span>), <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-17-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="como-o-ambiente-explica-a-vegeta√ß√£o" class="slide level2">
<h2>Como o Ambiente Explica a Vegeta√ß√£o?</h2>
<p><strong>Fun√ß√£o <code>envfit()</code> ajusta vari√°veis ambientais ao NMDS</strong></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href=""></a><span class="co"># Ajustar vari√°veis ambientais √† ordena√ß√£o</span></span>
<span id="cb29-2"><a href=""></a>env_fit <span class="ot">&lt;-</span> <span class="fu">envfit</span>(nmds_result, amb, <span class="at">permutations =</span> <span class="dv">999</span>)</span>
<span id="cb29-3"><a href=""></a>env_fit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
***VECTORS

            NMDS1    NMDS2     r2 Pr(&gt;r)    
arg       0.67585 -0.73704 0.0673  0.212    
ph        0.45901  0.88843 0.2624  0.003 ** 
P         0.61134  0.79137 0.0938  0.092 .  
K        -0.47699  0.87891 0.0624  0.216    
Na        0.82661  0.56278 0.2196  0.004 ** 
MO        0.98554  0.16946 0.2197  0.006 ** 
hal      -0.60607 -0.79541 0.1138  0.050 *  
Al       -0.18755 -0.98226 0.1054  0.066 .  
Ca        0.63691  0.77094 0.0059  0.869    
Mg        0.93145  0.36386 0.3095  0.001 ***
CTCph7   -0.38939 -0.92107 0.0841  0.102    
CTCef    -0.30622 -0.95196 0.1237  0.037 *  
V         0.62692  0.77908 0.1250  0.041 *  
SB        0.84558  0.53384 0.0582  0.246    
cd       -0.32094 -0.94710 0.1566  0.027 *  
cotmedia  0.42751 -0.90401 0.0734  0.153    
desmax    0.66670  0.74532 0.2349  0.001 ***
decmed    0.47218  0.88150 0.2873  0.001 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
Permutation: free
Number of permutations: 999</code></pre>
</div>
</div>
<p><strong>r¬≤</strong> = for√ßa da correla√ß√£o | <strong>p &lt; 0.05</strong> = vari√°vel significativa</p>
</section>
<section id="visualizar-nmds-envfit" class="slide level2">
<h2>Visualizar NMDS + envfit</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href=""></a>fig <span class="ot">&lt;-</span> <span class="fu">ordiplot</span>(nmds_result, <span class="at">type =</span> <span class="st">"none"</span>)</span>
<span id="cb31-2"><a href=""></a></span>
<span id="cb31-3"><a href=""></a><span class="co"># Parcelas por grupo</span></span>
<span id="cb31-4"><a href=""></a><span class="fu">points</span>(fig, <span class="st">"sites"</span>, <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">col =</span> <span class="st">"blue"</span>, </span>
<span id="cb31-5"><a href=""></a>       <span class="at">select =</span> exposicao <span class="sc">==</span> <span class="st">"Norte"</span>)</span>
<span id="cb31-6"><a href=""></a><span class="fu">points</span>(fig, <span class="st">"sites"</span>, <span class="at">pch =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="st">"red"</span>, </span>
<span id="cb31-7"><a href=""></a>       <span class="at">select =</span> exposicao <span class="sc">==</span> <span class="st">"Sul"</span>)</span>
<span id="cb31-8"><a href=""></a></span>
<span id="cb31-9"><a href=""></a><span class="co"># Esp√©cies</span></span>
<span id="cb31-10"><a href=""></a>sp.names <span class="ot">&lt;-</span> <span class="fu">make.cepnames</span>(<span class="fu">colnames</span>(matriz))</span>
<span id="cb31-11"><a href=""></a><span class="fu">orditorp</span>(nmds_result, <span class="st">"sp"</span>, <span class="at">label =</span> sp.names,</span>
<span id="cb31-12"><a href=""></a>         <span class="at">priority =</span> <span class="fu">colSums</span>(matriz), <span class="at">pch =</span> <span class="st">"+"</span>, </span>
<span id="cb31-13"><a href=""></a>         <span class="at">pcol =</span> <span class="st">"grey"</span>, <span class="at">cex =</span> <span class="fl">0.6</span>)</span>
<span id="cb31-14"><a href=""></a></span>
<span id="cb31-15"><a href=""></a><span class="co"># Vetores ambientais (p &lt; 0.05)</span></span>
<span id="cb31-16"><a href=""></a><span class="fu">plot</span>(env_fit, <span class="at">p.max =</span> <span class="fl">0.05</span>, <span class="at">col =</span> <span class="st">"darkgreen"</span>, </span>
<span id="cb31-17"><a href=""></a>     <span class="at">cex =</span> <span class="fl">0.8</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb31-18"><a href=""></a></span>
<span id="cb31-19"><a href=""></a><span class="fu">legend</span>(<span class="st">"topleft"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Norte"</span>, <span class="st">"Sul"</span>), </span>
<span id="cb31-20"><a href=""></a>       <span class="at">pch =</span> <span class="fu">c</span>(<span class="dv">19</span>, <span class="dv">1</span>), <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-19-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="interpretando-o-envfit" class="slide level2">
<h2>Interpretando o envfit</h2>
<p><strong>Vetores ambientais:</strong></p>
<ul>
<li><strong>Dire√ß√£o</strong> ‚Üí gradiente da vari√°vel</li>
<li><strong>Comprimento</strong> ‚Üí for√ßa da correla√ß√£o<br>
</li>
<li><strong>√Çngulo</strong> ‚Üí correla√ß√£o entre vari√°veis</li>
</ul>
<p><strong>Exemplo:</strong> - Parcelas <strong>Norte</strong> ‚Üí solos √°cidos, baixo Ca/Mg - Parcelas <strong>Sul</strong> ‚Üí solos f√©rteis, alto Ca/Mg - pH e Altitude explicam composi√ß√£o de esp√©cies</p>
</section>
<section id="nmds-simplificado-sem-esp√©cies" class="slide level2">
<h2>NMDS Simplificado (sem esp√©cies)</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href=""></a>fig <span class="ot">&lt;-</span> <span class="fu">ordiplot</span>(nmds_result, <span class="at">type =</span> <span class="st">"none"</span>)</span>
<span id="cb32-2"><a href=""></a></span>
<span id="cb32-3"><a href=""></a><span class="co"># Apenas parcelas</span></span>
<span id="cb32-4"><a href=""></a><span class="fu">points</span>(fig, <span class="st">"sites"</span>, <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">col =</span> <span class="st">"blue"</span>, </span>
<span id="cb32-5"><a href=""></a>       <span class="at">select =</span> exposicao <span class="sc">==</span> <span class="st">"Norte"</span>)</span>
<span id="cb32-6"><a href=""></a><span class="fu">points</span>(fig, <span class="st">"sites"</span>, <span class="at">pch =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="st">"red"</span>, </span>
<span id="cb32-7"><a href=""></a>       <span class="at">select =</span> exposicao <span class="sc">==</span> <span class="st">"Sul"</span>)</span>
<span id="cb32-8"><a href=""></a></span>
<span id="cb32-9"><a href=""></a><span class="co"># Apenas vetores significativos</span></span>
<span id="cb32-10"><a href=""></a><span class="fu">plot</span>(env_fit, <span class="at">p.max =</span> <span class="fl">0.05</span>, <span class="at">col =</span> <span class="st">"darkgreen"</span>, </span>
<span id="cb32-11"><a href=""></a>     <span class="at">cex =</span> <span class="dv">1</span>, <span class="at">lwd =</span> <span class="fl">2.5</span>)</span>
<span id="cb32-12"><a href=""></a></span>
<span id="cb32-13"><a href=""></a><span class="fu">legend</span>(<span class="st">"topleft"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Norte"</span>, <span class="st">"Sul"</span>), </span>
<span id="cb32-14"><a href=""></a>       <span class="at">pch =</span> <span class="fu">c</span>(<span class="dv">19</span>, <span class="dv">1</span>), <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-20-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"><p>Gr√°fico mais limpo para visualizar padr√µes ambientais! üìä</p>
</section>
<section id="permanova---teste-multivariado" class="slide level2">
<h2>PERMANOVA - Teste Multivariado</h2>
<p><strong>Testa se composi√ß√£o de esp√©cies difere entre grupos</strong></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href=""></a><span class="co"># PERMANOVA</span></span>
<span id="cb33-2"><a href=""></a>permanova_result <span class="ot">&lt;-</span> <span class="fu">adonis2</span>(matriz <span class="sc">~</span> exposicao, </span>
<span id="cb33-3"><a href=""></a>                            <span class="at">method =</span> <span class="st">"bray"</span>,</span>
<span id="cb33-4"><a href=""></a>                            <span class="at">permutations =</span> <span class="dv">999</span>)</span>
<span id="cb33-5"><a href=""></a>permanova_result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Permutation test for adonis under reduced model
Permutation: free
Number of permutations: 999

adonis2(formula = matriz ~ exposicao, permutations = 999, method = "bray")
         Df SumOfSqs      R2     F Pr(&gt;F)    
Model     1   1.1617 0.08451 4.431  0.001 ***
Residual 48  12.5840 0.91549                 
Total    49  13.7457 1.00000                 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p><strong>p &lt; 0.05?</strong> ‚Üí Composi√ß√£o √â diferente entre Norte/Sul!</p>
<p><strong>R¬≤</strong> ‚Üí % da varia√ß√£o explicada pela exposi√ß√£o</p>
</section>
<section id="teste-de-homogeneidade-de-dispers√£o" class="slide level2">
<h2>Teste de Homogeneidade de Dispers√£o</h2>
<p><strong>O que √© betadisper?</strong></p>
<p>Verifica se os grupos t√™m <strong>dispers√£o</strong> (variabilidade) semelhante</p>
<p><strong>Por que isso importa?</strong></p>
<ul>
<li>PERMANOVA pode detectar diferen√ßas de dispers√£o OU de composi√ß√£o</li>
<li>Precisamos separar esses dois efeitos!</li>
</ul>
</section>
<section id="an√°lise-de-dispers√£o-betadisper" class="slide level2">
<h2>An√°lise de Dispers√£o (betadisper)</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href=""></a><span class="co"># Calcular dist√¢ncias de Bray-Curtis</span></span>
<span id="cb35-2"><a href=""></a>dist_bray <span class="ot">&lt;-</span> <span class="fu">vegdist</span>(matriz, <span class="at">method =</span> <span class="st">"bray"</span>)</span>
<span id="cb35-3"><a href=""></a></span>
<span id="cb35-4"><a href=""></a><span class="co"># Teste de dispers√£o entre grupos</span></span>
<span id="cb35-5"><a href=""></a>dispersao <span class="ot">&lt;-</span> <span class="fu">betadisper</span>(dist_bray, exposicao)</span>
<span id="cb35-6"><a href=""></a></span>
<span id="cb35-7"><a href=""></a><span class="co"># Testar signific√¢ncia</span></span>
<span id="cb35-8"><a href=""></a><span class="fu">anova</span>(dispersao)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: Distances
          Df   Sum Sq  Mean Sq F value    Pr(&gt;F)    
Groups     1 0.083215 0.083215  15.642 0.0002513 ***
Residuals 48 0.255363 0.005320                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href=""></a><span class="co"># Visualizar</span></span>
<span id="cb37-2"><a href=""></a><span class="fu">plot</span>(dispersao, <span class="at">main =</span> <span class="st">"Dispers√£o Multivariada por Setor"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-22-1.png" class="quarto-figure quarto-figure-center r-stretch" width="768"></section>
<section id="interpretando-o-betadisper" class="slide level2">
<h2>Interpretando o betadisper</h2>
<p><strong>Resultado do ANOVA:</strong></p>
<ul>
<li><strong>p &gt; 0.05</strong> ‚Üí Dispers√µes semelhantes ‚úÖ
<ul>
<li>PERMANOVA confi√°vel!</li>
<li>Diferen√ßa √© de composi√ß√£o</li>
</ul></li>
<li><strong>p &lt; 0.05</strong> ‚Üí Dispers√µes diferentes ‚ö†Ô∏è
<ul>
<li>Aten√ß√£o! Grupos t√™m variabilidades distintas</li>
<li>PERMANOVA pode estar detectando isso, n√£o composi√ß√£o</li>
</ul></li>
</ul>
</section>
<section id="exemplo-visual---dispers√µes-iguais" class="slide level2">
<h2>Exemplo Visual - Dispers√µes Iguais</h2>

<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-23-1.png" class="quarto-figure quarto-figure-center r-stretch" width="768"><p>Grupos separados, mas com variabilidade similar</p>
</section>
<section id="exemplo-visual---dispers√µes-diferentes" class="slide level2">
<h2>Exemplo Visual - Dispers√µes Diferentes</h2>

<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-24-1.png" class="quarto-figure quarto-figure-center r-stretch" width="768"><p>Norte muito vari√°vel, Sul homog√™neo ‚Üí problema!</p>
</section>
<section id="resumo-betadisper" class="slide level2">
<h2>Resumo betadisper</h2>
<p><strong>O que faz:</strong> Testa se grupos t√™m variabilidade semelhante</p>
<p><strong>Quando usar:</strong> Sempre DEPOIS do PERMANOVA significativo</p>
<p><strong>Interpreta√ß√£o conjunta:</strong></p>
<table class="caption-top">
<thead>
<tr class="header">
<th>PERMANOVA</th>
<th>betadisper</th>
<th>Conclus√£o</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>p &lt; 0.05</td>
<td>p &gt; 0.05</td>
<td>‚úÖ Composi√ß√£o diferente</td>
</tr>
<tr class="even">
<td>p &lt; 0.05</td>
<td>p &lt; 0.05</td>
<td>‚ö†Ô∏è Dispers√£o diferente</td>
</tr>
<tr class="odd">
<td>p &gt; 0.05</td>
<td>qualquer</td>
<td>Grupos n√£o diferem</td>
</tr>
</tbody>
</table>
</section>
<section id="pcoa---an√°lise-de-coordenadas-principais" class="slide level2">
<h2>PCoA - An√°lise de Coordenadas Principais</h2>
<p><strong>Principal Coordinates Analysis (PCoA)</strong></p>
<p>Tamb√©m conhecida como <strong>MDS (Metric Multidimensional Scaling)</strong></p>
<p><strong>O que faz:</strong> Representa rela√ß√µes entre parcelas usando qualquer √≠ndice de dissimilaridade</p>
<p><strong>Propriedade importante:</strong> Transforma dissimilaridades em dist√¢ncias Euclidianas</p>
</section>
<section id="como-pcoa-funciona" class="slide level2">
<h2>Como PCoA funciona?</h2>
<p><strong>Entrada:</strong> Matriz de dissimilaridades entre parcelas</p>
<p><strong>Sa√≠da:</strong> Eixos ortogonais (independentes) ordenados por import√¢ncia</p>
<p><strong>Rela√ß√£o com outros m√©todos:</strong></p>
<ul>
<li>PCoA com dist√¢ncia Euclidiana = PCA</li>
<li>PCoA com dist√¢ncia qui-quadrado ‚âà CA</li>
<li>PCoA com Bray-Curtis = ideal para vegeta√ß√£o</li>
</ul>
</section>
<section id="pcoa-na-pr√°tica" class="slide level2">
<h2>PCoA na Pr√°tica</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href=""></a><span class="co"># Calcular matriz de dissimilaridade</span></span>
<span id="cb38-2"><a href=""></a>dist_bray <span class="ot">&lt;-</span> <span class="fu">vegdist</span>(matriz, <span class="at">method =</span> <span class="st">"bray"</span>)</span>
<span id="cb38-3"><a href=""></a></span>
<span id="cb38-4"><a href=""></a><span class="co"># Executar PCoA</span></span>
<span id="cb38-5"><a href=""></a>pcoa_result <span class="ot">&lt;-</span> <span class="fu">cmdscale</span>(dist_bray, <span class="at">k =</span> <span class="dv">2</span>, <span class="at">eig =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-6"><a href=""></a></span>
<span id="cb38-7"><a href=""></a><span class="co"># Ver autovalores (% de varia√ß√£o)</span></span>
<span id="cb38-8"><a href=""></a>eigenvalues <span class="ot">&lt;-</span> pcoa_result<span class="sc">$</span>eig</span>
<span id="cb38-9"><a href=""></a>var_explained <span class="ot">&lt;-</span> eigenvalues <span class="sc">/</span> <span class="fu">sum</span>(eigenvalues) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb38-10"><a href=""></a></span>
<span id="cb38-11"><a href=""></a><span class="fu">cat</span>(<span class="st">"Eixo 1:"</span>, <span class="fu">round</span>(var_explained[<span class="dv">1</span>], <span class="dv">1</span>), <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Eixo 1: 15 %</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href=""></a><span class="fu">cat</span>(<span class="st">"Eixo 2:"</span>, <span class="fu">round</span>(var_explained[<span class="dv">2</span>], <span class="dv">1</span>), <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Eixo 2: 11 %</code></pre>
</div>
</div>
</section>
<section id="problema-autovalores-negativos" class="slide level2">
<h2>‚ö†Ô∏è Problema: Autovalores Negativos</h2>
<p><strong>Quando usar √≠ndices n√£o-m√©tricos (ex: Bray-Curtis puro):</strong></p>
<ul>
<li>Podem aparecer autovalores negativos</li>
<li>Eixos n√£o podem ser plotados!</li>
</ul>
<p><strong>Solu√ß√µes:</strong></p>
<ol type="1">
<li>Transformar para m√©trico: <code>sqrt()</code> no Bray-Curtis ‚úÖ</li>
<li>Corre√ß√µes: Lingoes ou Cailliez</li>
<li>Usar NMDS (aceita qualquer √≠ndice)</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href=""></a><span class="co"># Bray-Curtis transformado (m√©trico)</span></span>
<span id="cb42-2"><a href=""></a>dist_bray_sqrt <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(dist_bray)</span>
<span id="cb42-3"><a href=""></a>pcoa_result <span class="ot">&lt;-</span> <span class="fu">cmdscale</span>(dist_bray_sqrt, <span class="at">k =</span> <span class="dv">2</span>, <span class="at">eig =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualizar-pcoa" class="slide level2">
<h2>Visualizar PCoA</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href=""></a>scores_pcoa <span class="ot">&lt;-</span> pcoa_result<span class="sc">$</span>points</span>
<span id="cb43-2"><a href=""></a></span>
<span id="cb43-3"><a href=""></a><span class="fu">plot</span>(scores_pcoa[,<span class="dv">1</span>], scores_pcoa[,<span class="dv">2</span>],</span>
<span id="cb43-4"><a href=""></a>     <span class="at">xlab =</span> <span class="fu">paste0</span>(<span class="st">"PCoA1 ("</span>, <span class="fu">round</span>(var_explained[<span class="dv">1</span>], <span class="dv">1</span>), <span class="st">"%)"</span>),</span>
<span id="cb43-5"><a href=""></a>     <span class="at">ylab =</span> <span class="fu">paste0</span>(<span class="st">"PCoA2 ("</span>, <span class="fu">round</span>(var_explained[<span class="dv">2</span>], <span class="dv">1</span>), <span class="st">"%)"</span>),</span>
<span id="cb43-6"><a href=""></a>     <span class="at">main =</span> <span class="st">"PCoA - Composi√ß√£o de Esp√©cies"</span>,</span>
<span id="cb43-7"><a href=""></a>     <span class="at">pch =</span> <span class="dv">19</span>, </span>
<span id="cb43-8"><a href=""></a>     <span class="at">col =</span> <span class="fu">ifelse</span>(exposicao <span class="sc">==</span> <span class="st">"Norte"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>),</span>
<span id="cb43-9"><a href=""></a>     <span class="at">cex =</span> <span class="fl">1.5</span>)</span>
<span id="cb43-10"><a href=""></a></span>
<span id="cb43-11"><a href=""></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Norte"</span>, <span class="st">"Sul"</span>),</span>
<span id="cb43-12"><a href=""></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>), <span class="at">pch =</span> <span class="dv">19</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-27-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="pcoa-vs-nmds---diferen√ßas-fundamentais" class="slide level2">
<h2>PCoA vs NMDS - Diferen√ßas Fundamentais</h2>
<table class="caption-top">
<colgroup>
<col style="width: 32%">
<col style="width: 34%">
<col style="width: 32%">
</colgroup>
<thead>
<tr class="header">
<th>Caracter√≠stica</th>
<th>PCoA</th>
<th>NMDS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Algoritmo</strong></td>
<td>Anal√≠tico (√∫nico)</td>
<td>Iterativo (m√∫ltiplos)</td>
</tr>
<tr class="even">
<td><strong>Usa valores</strong></td>
<td>Dissimilaridades reais</td>
<td>Rankings</td>
</tr>
<tr class="odd">
<td><strong>Reprodutibilidade</strong></td>
<td>Sempre igual</td>
<td>Pode variar</td>
</tr>
<tr class="even">
<td><strong>N¬∫ de eixos</strong></td>
<td>Dado pelos dados</td>
<td>Voc√™ escolhe (k)</td>
</tr>
<tr class="odd">
<td><strong>% explicada</strong></td>
<td>Sim (autovalores)</td>
<td>N√£o</td>
</tr>
<tr class="even">
<td><strong>Qualidade</strong></td>
<td>Autovalores</td>
<td>Stress</td>
</tr>
<tr class="odd">
<td><strong>Esp√©cies</strong></td>
<td>Projetar depois</td>
<td>Projetar depois</td>
</tr>
</tbody>
</table>
</section>
<section id="rela√ß√£o-pcoa-nmds" class="slide level2">
<h2>Rela√ß√£o PCoA ‚Üí NMDS</h2>
<p><strong>Conceito importante:</strong></p>
<p>NMDS geralmente usa PCoA como <strong>configura√ß√£o inicial</strong></p>
<p>‚Üí NMDS otimiza a solu√ß√£o do PCoA iterativamente</p>
<p>‚Üí Tenta representar mais varia√ß√£o em menos eixos</p>
<p><strong>Na pr√°tica:</strong> NMDS ‚Äúmelhora‚Äù o PCoA quando stress &lt; 0.20</p>
</section>
<section id="quando-usar-cada-um" class="slide level2">
<h2>Quando usar cada um?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Use PCoA quando:</strong></p>
<p>‚úì Precisar de % varia√ß√£o explicada</p>
<p>‚úì Quiser solu√ß√£o √∫nica/reprodut√≠vel</p>
<p>‚úì Dataset grande (&gt;100 parcelas)</p>
<p>‚úì An√°lise r√°pida</p>
<p>‚úì Comparar com PCA</p>
<p>‚úì Necessidade de eixos ortogonais</p>
</div><div class="column" style="width:50%;">
<p><strong>Use NMDS quando:</strong></p>
<p>‚úì Quiser melhor representa√ß√£o visual</p>
<p>‚úì √çndice n√£o-m√©trico (sem transformar)</p>
<p>‚úì Publicar figura principal</p>
<p>‚úì Stress &lt; 0.20</p>
<p>‚úì Dataset pequeno/m√©dio</p>
</div></div>
<p><strong>Dica:</strong> Rode os dois! NMDS otimiza PCoA quando funciona bem</p>
</section>
<section id="compara√ß√£o-visual" class="slide level2">
<h2>Compara√ß√£o Visual</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href=""></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb44-2"><a href=""></a></span>
<span id="cb44-3"><a href=""></a><span class="co"># PCoA</span></span>
<span id="cb44-4"><a href=""></a><span class="fu">plot</span>(scores_pcoa[,<span class="dv">1</span>], scores_pcoa[,<span class="dv">2</span>],</span>
<span id="cb44-5"><a href=""></a>     <span class="at">xlab =</span> <span class="fu">paste0</span>(<span class="st">"PCoA1 ("</span>, <span class="fu">round</span>(var_explained[<span class="dv">1</span>], <span class="dv">1</span>), <span class="st">"%)"</span>),</span>
<span id="cb44-6"><a href=""></a>     <span class="at">ylab =</span> <span class="fu">paste0</span>(<span class="st">"PCoA2 ("</span>, <span class="fu">round</span>(var_explained[<span class="dv">2</span>], <span class="dv">1</span>), <span class="st">"%)"</span>),</span>
<span id="cb44-7"><a href=""></a>     <span class="at">main =</span> <span class="st">"PCoA - Solu√ß√£o Anal√≠tica"</span>,</span>
<span id="cb44-8"><a href=""></a>     <span class="at">pch =</span> <span class="dv">19</span>, </span>
<span id="cb44-9"><a href=""></a>     <span class="at">col =</span> <span class="fu">ifelse</span>(exposicao <span class="sc">==</span> <span class="st">"Norte"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>))</span>
<span id="cb44-10"><a href=""></a></span>
<span id="cb44-11"><a href=""></a><span class="co"># NMDS</span></span>
<span id="cb44-12"><a href=""></a><span class="fu">plot</span>(nmds_result, <span class="at">type =</span> <span class="st">"n"</span>, <span class="at">main =</span> <span class="fu">paste0</span>(<span class="st">"NMDS - Stress = "</span>, </span>
<span id="cb44-13"><a href=""></a>     <span class="fu">round</span>(nmds_result<span class="sc">$</span>stress, <span class="dv">3</span>)))</span>
<span id="cb44-14"><a href=""></a><span class="fu">points</span>(nmds_result, <span class="at">display =</span> <span class="st">"sites"</span>, <span class="at">pch =</span> <span class="dv">19</span>,</span>
<span id="cb44-15"><a href=""></a>       <span class="at">col =</span> <span class="fu">ifelse</span>(exposicao <span class="sc">==</span> <span class="st">"Norte"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href=""></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-28-1.png" class="quarto-figure quarto-figure-center r-stretch" width="1152"></section>
<section id="resumo-pcoa-nmds" class="slide level2">
<h2>Resumo: PCoA &amp; NMDS</h2>
<p><strong>PCoA:</strong> - Solu√ß√£o anal√≠tica √∫nica e reprodut√≠vel - Fornece % varia√ß√£o explicada - R√°pido, ideal para grandes datasets - Prefira √≠ndices m√©tricos ou transforme</p>
<p><strong>NMDS:</strong> - Solu√ß√£o iterativa (otimiza PCoA) - Avaliado por stress (&lt; 0.20) - Melhor representa√ß√£o visual - Aceita qualquer √≠ndice</p>
<p><strong>Ambos:</strong> - Trabalham com matrizes de dissimilaridade - Esp√©cies adicionadas por weighted averaging - Use Bray-Curtis para dados de vegeta√ß√£o</p>
</section>
<section id="ordena√ß√µes-restritas" class="slide level2">
<h2>üîÑ Ordena√ß√µes Restritas</h2>
<p><strong>N√£o-restritas:</strong> Exploram padr√µes (PCA, NMDS)</p>
<p><strong>Restritas:</strong> Testam hip√≥teses (RDA, CCA)</p>
<p><strong>Pergunta:</strong> Ambiente explica a vegeta√ß√£o?</p>
</section>
<section id="dca---diagn√≥stico-de-gradiente" class="slide level2">
<h2>DCA - Diagn√≥stico de Gradiente üéØ</h2>
<p><strong>Objetivo:</strong> Medir comprimento do gradiente</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href=""></a><span class="co"># Executar DCA</span></span>
<span id="cb46-2"><a href=""></a>dca_result <span class="ot">&lt;-</span> <span class="fu">decorana</span>(matriz)</span>
<span id="cb46-3"><a href=""></a></span>
<span id="cb46-4"><a href=""></a><span class="co"># Extrair comprimento (em SD)</span></span>
<span id="cb46-5"><a href=""></a><span class="fu">cat</span>(<span class="st">"DCA1:"</span>, <span class="fu">round</span>(dca_result<span class="sc">$</span>evals[<span class="dv">1</span>], <span class="dv">2</span>), <span class="st">"SD</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>DCA1: 0.43 SD</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href=""></a><span class="fu">cat</span>(<span class="st">"DCA2:"</span>, <span class="fu">round</span>(dca_result<span class="sc">$</span>evals[<span class="dv">2</span>], <span class="dv">2</span>), <span class="st">"SD</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>DCA2: 0.23 SD</code></pre>
</div>
</div>
<p><strong>Regra:</strong> &lt; 3 SD = <strong>RDA</strong> | &gt; 4 SD = <strong>CCA</strong></p>
<p><strong>üí° Execute DCA primeiro!</strong></p>
</section>
<section id="escolhendo-o-m√©todo-fluxograma" class="slide level2">
<h2>Escolhendo o M√©todo: Fluxograma üìä</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item" id="htmlwidget-dbe5104992de525f6ce3" style="width:864px;height:576px;"></div>
<script type="application/json" data-for="htmlwidget-dbe5104992de525f6ce3">{"x":{"diagram":"\ndigraph escolha {\n  graph [rankdir = TB, bgcolor = transparent]\n  node [shape = box, style = filled, fontname = Arial, fontsize = 11]\n\n  START [label = \"Rode DCA primeiro!\", fillcolor = \"#FF6B6B\", fontcolor = white]\n  Q1 [label = \"Gradiente < 3 SD?\", fillcolor = \"#FFE66D\", shape = diamond]\n  Q2 [label = \"Tem vari√°veis\nexplicativas?\", fillcolor = \"#4ECDC4\", shape = diamond]\n  Q3 [label = \"Tem vari√°veis\nexplicativas?\", fillcolor = \"#4ECDC4\", shape = diamond]\n\n  PCA [label = \"PCA\n(n√£o-restrita)\", fillcolor = \"#95E1D3\"]\n  RDA [label = \"RDA\n(restrita)\", fillcolor = \"#38A3A5\"]\n  DCA [label = \"DCA/NMDS\n(n√£o-restrita)\", fillcolor = \"#95E1D3\"]\n  CCA [label = \"CCA\n(restrita)\", fillcolor = \"#38A3A5\"]\n\n  START -> Q1\n  Q1 -> Q2 [label = \"Sim\"]\n  Q1 -> Q3 [label = \"N√£o\"]\n  Q2 -> PCA [label = \"N√£o\"]\n  Q2 -> RDA [label = \"Sim\"]\n  Q3 -> DCA [label = \"N√£o\"]\n  Q3 -> CCA [label = \"Sim\"]\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="rda---an√°lise-de-redund√¢ncia" class="slide level2">
<h2>RDA - An√°lise de Redund√¢ncia</h2>
<p><strong>Quando:</strong> Gradientes CURTOS (&lt; 3 SD)</p>
<p><strong>O que faz:</strong></p>
<ul>
<li><strong>PCA ambiental:</strong> descreve como as parcelas diferem no ambiente</li>
<li><strong>RDA:</strong> testa se essas diferen√ßas ambientais explicam a vegeta√ß√£o</li>
</ul>
<p><strong>Pergunta-chave:</strong> As vari√°veis ambientais medidas explicam a composi√ß√£o de esp√©cies?</p>
<p><strong>Resultado:</strong> R¬≤ = propor√ß√£o da varia√ß√£o da comunidade explicada pelo ambiente</p>
</section>
<section id="rda-na-pr√°tica" class="slide level2">
<h2>RDA na Pr√°tica</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href=""></a><span class="co"># Verificar se gradiente √© curto (do DCA anterior)</span></span>
<span id="cb50-2"><a href=""></a><span class="co"># Se DCA1 &lt; 3 SD ‚Üí usar RDA ‚úì</span></span>
<span id="cb50-3"><a href=""></a></span>
<span id="cb50-4"><a href=""></a><span class="co"># Executar RDA</span></span>
<span id="cb50-5"><a href=""></a><span class="co"># Usar f√≥rmula com ~ . para incluir todas as vari√°veis</span></span>
<span id="cb50-6"><a href=""></a><span class="co"># Ou especificar vari√°veis espec√≠ficas</span></span>
<span id="cb50-7"><a href=""></a>rda_result <span class="ot">&lt;-</span> <span class="fu">rda</span>(matriz <span class="sc">~</span> ., <span class="at">data =</span> amb)</span>
<span id="cb50-8"><a href=""></a></span>
<span id="cb50-9"><a href=""></a><span class="co"># Ver resultados</span></span>
<span id="cb50-10"><a href=""></a>rda_result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call: rda(formula = matriz ~ arg + ph + P + K + Na + MO + hal + Al + Ca +
Mg + CTCph7 + CTCef + V + SB + cd + cotmedia + desmax + decmed, data = amb)

               Inertia Proportion Rank
Total         139.0690     1.0000     
Constrained    62.0802     0.4464   15
Unconstrained  76.9888     0.5536   34

Inertia is variance

-- NOTE:
Some constraints or conditions were aliased because they were redundant.
This can happen if terms are constant or linearly dependent (collinear):
'CTCph7', 'CTCef', 'SB'

Eigenvalues for constrained axes:
  RDA1   RDA2   RDA3   RDA4   RDA5   RDA6   RDA7   RDA8   RDA9  RDA10  RDA11 
28.632 10.843  5.287  3.640  2.831  2.362  1.722  1.587  1.183  1.124  0.882 
 RDA12  RDA13  RDA14  RDA15 
 0.726  0.516  0.456  0.289 

Eigenvalues for unconstrained axes:
   PC1    PC2    PC3    PC4    PC5    PC6    PC7    PC8 
24.968  7.339  6.202  4.373  4.207  3.958  3.404  2.857 
(Showing 8 of 34 unconstrained eigenvalues)</code></pre>
</div>
</div>
</section>
<section id="entendendo-o-output-do-rda" class="slide level2">
<h2>Entendendo o Output do RDA</h2>
<p><strong>Parti√ß√£o da In√©rcia:</strong></p>
<ul>
<li><strong>Total</strong> = Varia√ß√£o total nos dados</li>
<li><strong>Constrained</strong> = Explicada pelas vari√°veis (IMPORTANTE!)</li>
<li><strong>Unconstrained</strong> = N√£o explicada (res√≠duo)</li>
</ul>
<p><strong>R¬≤ ajustado:</strong> Propor√ß√£o da varia√ß√£o explicada (corrigido para n¬∫ de vari√°veis)</p>
<p><em>Importante:</em> Use R¬≤ ajustado para comparar modelos com diferentes n√∫meros de vari√°veis</p>
</section>
<section id="teste-de-signific√¢ncia-do-rda" class="slide level2">
<h2>Teste de Signific√¢ncia do RDA</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href=""></a><span class="co"># Teste de permuta√ß√£o para o modelo completo</span></span>
<span id="cb52-2"><a href=""></a>anova_rda <span class="ot">&lt;-</span> <span class="fu">anova.cca</span>(rda_result, <span class="at">permutations =</span> <span class="dv">999</span>)</span>
<span id="cb52-3"><a href=""></a>anova_rda</span>
<span id="cb52-4"><a href=""></a></span>
<span id="cb52-5"><a href=""></a><span class="co"># Teste para cada vari√°vel</span></span>
<span id="cb52-6"><a href=""></a>anova_rda_terms <span class="ot">&lt;-</span> <span class="fu">anova.cca</span>(rda_result, <span class="at">by =</span> <span class="st">"terms"</span>, <span class="at">permutations =</span> <span class="dv">999</span>)</span>
<span id="cb52-7"><a href=""></a>anova_rda_terms</span>
<span id="cb52-8"><a href=""></a></span>
<span id="cb52-9"><a href=""></a><span class="co"># Teste para cada eixo</span></span>
<span id="cb52-10"><a href=""></a>anova_rda_axis <span class="ot">&lt;-</span> <span class="fu">anova.cca</span>(rda_result, <span class="at">by =</span> <span class="st">"axis"</span>, <span class="at">permutations =</span> <span class="dv">999</span>)</span>
<span id="cb52-11"><a href=""></a>anova_rda_axis</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>p &lt; 0.05?</strong> ‚Üí Modelo/vari√°vel/eixo √â significativo!</p>
</section>
<section id="interpretando-os-testes-de-permuta√ß√£o" class="slide level2">
<h2>Interpretando os Testes de Permuta√ß√£o</h2>
<p><strong>1. Modelo completo (anova.cca)</strong> - Testa se as vari√°veis <strong>em conjunto</strong> explicam a vegeta√ß√£o - p &lt; 0.05 ‚Üí modelo significativo ‚úì</p>
<p><strong>2. Por vari√°vel (by = ‚Äúterms‚Äù)</strong> - Testa cada vari√°vel <strong>individualmente</strong> - Identifica quais vari√°veis s√£o importantes - Use para <strong>simplificar o modelo</strong></p>
<p><strong>3. Por eixo (by = ‚Äúaxis‚Äù)</strong> - Testa se cada eixo can√¥nico √© significativo - Quantos gradientes ambientais s√£o importantes? - Importante para decidir <strong>quantos eixos interpretar</strong></p>
</section>
<section id="interpretando-o-triplot-rda" class="slide level2">
<h2>Interpretando o Triplot RDA</h2>
<p><strong>3 Tipos de elementos:</strong></p>
<ol type="1">
<li><strong>Parcelas (pontos)</strong> ‚Üí composi√ß√£o flor√≠stica</li>
<li><strong>Esp√©cies (texto)</strong> ‚Üí ocorr√™ncia/abund√¢ncia</li>
<li><strong>Setas verdes</strong> ‚Üí gradientes ambientais</li>
</ol>
<p><strong>Como interpretar:</strong></p>
<ul>
<li>Parcelas pr√≥ximas = composi√ß√£o similar</li>
<li>Esp√©cie pr√≥xima da seta = favorecida pela vari√°vel</li>
<li>Seta longa = vari√°vel importante</li>
</ul>
</section>
<section id="visualizar-rda---triplot" class="slide level2">
<h2>Visualizar RDA - Triplot</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href=""></a><span class="co"># Criar gr√°fico base</span></span>
<span id="cb53-2"><a href=""></a><span class="fu">plot</span>(rda_result, <span class="at">type =</span> <span class="st">"n"</span>,</span>
<span id="cb53-3"><a href=""></a>     <span class="at">main =</span> <span class="st">"RDA - Vegeta√ß√£o ~ Ambiente"</span>)</span>
<span id="cb53-4"><a href=""></a></span>
<span id="cb53-5"><a href=""></a><span class="co"># Adicionar parcelas</span></span>
<span id="cb53-6"><a href=""></a><span class="fu">points</span>(rda_result, <span class="at">display =</span> <span class="st">"sites"</span>, <span class="at">pch =</span> <span class="dv">19</span>,</span>
<span id="cb53-7"><a href=""></a>       <span class="at">col =</span> <span class="fu">ifelse</span>(exposicao <span class="sc">==</span> <span class="st">"Norte"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>))</span>
<span id="cb53-8"><a href=""></a></span>
<span id="cb53-9"><a href=""></a><span class="co"># Adicionar esp√©cies (principais)</span></span>
<span id="cb53-10"><a href=""></a>sp.names <span class="ot">&lt;-</span> <span class="fu">make.cepnames</span>(<span class="fu">colnames</span>(matriz))</span>
<span id="cb53-11"><a href=""></a><span class="fu">text</span>(rda_result, <span class="at">display =</span> <span class="st">"species"</span>,</span>
<span id="cb53-12"><a href=""></a>     <span class="at">labels =</span> sp.names,</span>
<span id="cb53-13"><a href=""></a>     <span class="at">cex =</span> <span class="fl">0.6</span>, <span class="at">col =</span> <span class="st">"grey40"</span>)</span>
<span id="cb53-14"><a href=""></a></span>
<span id="cb53-15"><a href=""></a><span class="co"># Adicionar vetores ambientais</span></span>
<span id="cb53-16"><a href=""></a><span class="fu">text</span>(rda_result, <span class="at">display =</span> <span class="st">"bp"</span>,</span>
<span id="cb53-17"><a href=""></a>     <span class="at">col =</span> <span class="st">"darkgreen"</span>, <span class="at">cex =</span> <span class="fl">0.9</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb53-18"><a href=""></a></span>
<span id="cb53-19"><a href=""></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Norte"</span>, <span class="st">"Sul"</span>),</span>
<span id="cb53-20"><a href=""></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>), <span class="at">pch =</span> <span class="dv">19</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-33-1.png" class="quarto-figure quarto-figure-center r-stretch" width="1152"></section>
<section id="sele√ß√£o-de-vari√°veis-no-rda" class="slide level2">
<h2>Sele√ß√£o de Vari√°veis no RDA</h2>
<p><strong>Problema:</strong> Muitas vari√°veis podem causar overfitting</p>
<p><strong>Solu√ß√£o:</strong> Sele√ß√£o forward</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href=""></a><span class="co"># Modelo nulo (sem preditoras)</span></span>
<span id="cb54-2"><a href=""></a>rda_null <span class="ot">&lt;-</span> <span class="fu">rda</span>(matriz <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> amb)</span>
<span id="cb54-3"><a href=""></a></span>
<span id="cb54-4"><a href=""></a><span class="co"># Modelo completo (todas preditoras)</span></span>
<span id="cb54-5"><a href=""></a>rda_full <span class="ot">&lt;-</span> <span class="fu">rda</span>(matriz <span class="sc">~</span> ., <span class="at">data =</span> amb)</span>
<span id="cb54-6"><a href=""></a></span>
<span id="cb54-7"><a href=""></a><span class="co"># Sele√ß√£o forward</span></span>
<span id="cb54-8"><a href=""></a>rda_select <span class="ot">&lt;-</span> <span class="fu">ordistep</span>(rda_null,</span>
<span id="cb54-9"><a href=""></a>                       <span class="at">scope =</span> <span class="fu">formula</span>(rda_full),</span>
<span id="cb54-10"><a href=""></a>                       <span class="at">direction =</span> <span class="st">"forward"</span>,</span>
<span id="cb54-11"><a href=""></a>                       <span class="at">permutations =</span> <span class="dv">999</span>)</span>
<span id="cb54-12"><a href=""></a></span>
<span id="cb54-13"><a href=""></a><span class="co"># Ver vari√°veis selecionadas</span></span>
<span id="cb54-14"><a href=""></a>rda_select<span class="sc">$</span>anova</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cca---an√°lise-de-correspond√™ncia-can√¥nica" class="slide level2">
<h2>CCA - An√°lise de Correspond√™ncia Can√¥nica</h2>
<p><strong>Canonical Correspondence Analysis - vers√£o restrita da CA</strong></p>
<p><strong>Quando usar:</strong></p>
<ul>
<li>Gradientes LONGOS (&gt; 4 SD)</li>
<li>Dados de vegeta√ß√£o com muitos zeros</li>
<li>Vari√°veis ambientais como preditoras</li>
<li>Rela√ß√µes unimodais esp√©cie-ambiente</li>
</ul>
<p><strong>Ideia b√°sica: CA que maximiza rela√ß√£o com vari√°veis ambientais</strong></p>
</section>
<section id="cca-vs-rda---diferen√ßa-crucial" class="slide level2">
<h2>CCA vs RDA - Diferen√ßa Crucial</h2>
<p><strong>Tipo de resposta das esp√©cies:</strong></p>
<ul>
<li><strong>RDA:</strong> Resposta LINEAR
<ul>
<li>Esp√©cie aumenta continuamente com a vari√°vel</li>
<li>Exemplo: umidade sempre favorece <em>Ilex paraguariensis</em></li>
</ul></li>
<li><strong>CCA:</strong> Resposta UNIMODAL
<ul>
<li>Esp√©cie tem √≥timo em valor intermedi√°rio</li>
<li>Exemplo: <em>Araucaria angustifolia</em> prefere pH ~5.5</li>
</ul></li>
</ul>
<p><strong>Na pr√°tica:</strong> CCA mais realista para gradientes longos!</p>
</section>
<section id="cca-na-pr√°tica" class="slide level2">
<h2>CCA na Pr√°tica</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href=""></a><span class="co"># Verificar se gradiente √© longo (do DCA anterior)</span></span>
<span id="cb55-2"><a href=""></a><span class="co"># Se DCA1 &gt; 4 SD ‚Üí usar CCA ‚úì</span></span>
<span id="cb55-3"><a href=""></a></span>
<span id="cb55-4"><a href=""></a><span class="co"># Executar CCA</span></span>
<span id="cb55-5"><a href=""></a>cca_result <span class="ot">&lt;-</span> <span class="fu">cca</span>(matriz <span class="sc">~</span> ., <span class="at">data =</span> amb)</span>
<span id="cb55-6"><a href=""></a></span>
<span id="cb55-7"><a href=""></a><span class="co"># Ver resultados</span></span>
<span id="cb55-8"><a href=""></a>cca_result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call: cca(formula = matriz ~ arg + ph + P + K + Na + MO + hal + Al + Ca +
Mg + CTCph7 + CTCef + V + SB + cd + cotmedia + desmax + decmed, data = amb)

              Inertia Proportion Rank
Total          4.8754     1.0000     
Constrained    1.8475     0.3789   15
Unconstrained  3.0279     0.6211   34

Inertia is scaled Chi-square

-- NOTE:
Some constraints or conditions were aliased because they were redundant.
This can happen if terms are constant or linearly dependent (collinear):
'CTCph7', 'CTCef', 'SB'

Eigenvalues for constrained axes:
  CCA1   CCA2   CCA3   CCA4   CCA5   CCA6   CCA7   CCA8   CCA9  CCA10  CCA11 
0.3695 0.2453 0.1842 0.1732 0.1363 0.1282 0.1133 0.1110 0.0782 0.0710 0.0617 
 CCA12  CCA13  CCA14  CCA15 
0.0599 0.0514 0.0380 0.0264 

Eigenvalues for unconstrained axes:
    CA1     CA2     CA3     CA4     CA5     CA6     CA7     CA8 
0.28370 0.26022 0.22824 0.18884 0.17056 0.16189 0.13380 0.13327 
(Showing 8 of 34 unconstrained eigenvalues)</code></pre>
</div>
</div>
</section>
<section id="entendendo-o-output-do-cca" class="slide level2">
<h2>Entendendo o Output do CCA</h2>
<p><strong>In√©rcia:</strong></p>
<ul>
<li><strong>Total</strong> = Varia√ß√£o total (qui-quadrado)</li>
<li><strong>Constrained</strong> = Explicada pelas vari√°veis</li>
<li><strong>Unconstrained</strong> = N√£o explicada (res√≠duo)</li>
</ul>
<p><strong>Diferen√ßa do RDA:</strong> Usa dist√¢ncia qui-quadrado, n√£o Euclidiana</p>
</section>
<section id="teste-de-signific√¢ncia-do-cca" class="slide level2">
<h2>Teste de Signific√¢ncia do CCA</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href=""></a><span class="co"># Teste para o modelo completo</span></span>
<span id="cb57-2"><a href=""></a>anova_cca <span class="ot">&lt;-</span> <span class="fu">anova.cca</span>(cca_result, <span class="at">permutations =</span> <span class="dv">999</span>)</span>
<span id="cb57-3"><a href=""></a>anova_cca</span>
<span id="cb57-4"><a href=""></a></span>
<span id="cb57-5"><a href=""></a><span class="co"># Teste para cada vari√°vel</span></span>
<span id="cb57-6"><a href=""></a>anova_cca_terms <span class="ot">&lt;-</span> <span class="fu">anova.cca</span>(cca_result, <span class="at">by =</span> <span class="st">"terms"</span>, <span class="at">permutations =</span> <span class="dv">999</span>)</span>
<span id="cb57-7"><a href=""></a>anova_cca_terms</span>
<span id="cb57-8"><a href=""></a></span>
<span id="cb57-9"><a href=""></a><span class="co"># Teste para cada eixo</span></span>
<span id="cb57-10"><a href=""></a>anova_cca_axis <span class="ot">&lt;-</span> <span class="fu">anova.cca</span>(cca_result, <span class="at">by =</span> <span class="st">"axis"</span>, <span class="at">permutations =</span> <span class="dv">999</span>)</span>
<span id="cb57-11"><a href=""></a>anova_cca_axis</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="interpretando-o-cca" class="slide level2">
<h2>Interpretando o CCA</h2>
<p><strong>Resposta unimodal das esp√©cies:</strong></p>
<ul>
<li>Esp√©cie no centro = valor √≥timo intermedi√°rio</li>
<li>Esp√©cie na ponta = favorecida por valor extremo</li>
<li>Posi√ß√£o na seta = prefer√™ncia ambiental</li>
</ul>
</section>
<section id="visualizar-cca---triplot" class="slide level2">
<h2>Visualizar CCA - Triplot</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href=""></a><span class="co"># Criar gr√°fico</span></span>
<span id="cb58-2"><a href=""></a><span class="fu">plot</span>(cca_result, <span class="at">type =</span> <span class="st">"n"</span>,</span>
<span id="cb58-3"><a href=""></a>     <span class="at">main =</span> <span class="st">"CCA - Vegeta√ß√£o ~ Ambiente (Gradiente Longo)"</span>)</span>
<span id="cb58-4"><a href=""></a></span>
<span id="cb58-5"><a href=""></a><span class="co"># Parcelas</span></span>
<span id="cb58-6"><a href=""></a><span class="fu">points</span>(cca_result, <span class="at">display =</span> <span class="st">"sites"</span>, <span class="at">pch =</span> <span class="dv">19</span>,</span>
<span id="cb58-7"><a href=""></a>       <span class="at">col =</span> <span class="fu">ifelse</span>(exposicao <span class="sc">==</span> <span class="st">"Norte"</span>, <span class="st">"blue"</span>, <span class="st">"red"</span>))</span>
<span id="cb58-8"><a href=""></a></span>
<span id="cb58-9"><a href=""></a><span class="co"># Esp√©cies (principais)</span></span>
<span id="cb58-10"><a href=""></a>sp.names <span class="ot">&lt;-</span> <span class="fu">make.cepnames</span>(<span class="fu">colnames</span>(matriz))</span>
<span id="cb58-11"><a href=""></a><span class="fu">text</span>(cca_result, <span class="at">display =</span> <span class="st">"species"</span>,</span>
<span id="cb58-12"><a href=""></a>     <span class="at">labels =</span> sp.names,</span>
<span id="cb58-13"><a href=""></a>     <span class="at">cex =</span> <span class="fl">0.6</span>, <span class="at">col =</span> <span class="st">"grey40"</span>)</span>
<span id="cb58-14"><a href=""></a></span>
<span id="cb58-15"><a href=""></a><span class="co"># Vetores ambientais</span></span>
<span id="cb58-16"><a href=""></a><span class="fu">text</span>(cca_result, <span class="at">display =</span> <span class="st">"bp"</span>,</span>
<span id="cb58-17"><a href=""></a>     <span class="at">col =</span> <span class="st">"darkgreen"</span>, <span class="at">cex =</span> <span class="fl">0.9</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb58-18"><a href=""></a></span>
<span id="cb58-19"><a href=""></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"Norte"</span>, <span class="st">"Sul"</span>),</span>
<span id="cb58-20"><a href=""></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>), <span class="at">pch =</span> <span class="dv">19</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-37-1.png" class="quarto-figure quarto-figure-center r-stretch" width="1152"></section>
<section id="sele√ß√£o-de-vari√°veis-no-cca" class="slide level2">
<h2>Sele√ß√£o de Vari√°veis no CCA</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href=""></a><span class="co"># Modelo nulo</span></span>
<span id="cb59-2"><a href=""></a>cca_null <span class="ot">&lt;-</span> <span class="fu">cca</span>(matriz <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> amb)</span>
<span id="cb59-3"><a href=""></a></span>
<span id="cb59-4"><a href=""></a><span class="co"># Modelo completo</span></span>
<span id="cb59-5"><a href=""></a>cca_full <span class="ot">&lt;-</span> <span class="fu">cca</span>(matriz <span class="sc">~</span> ., <span class="at">data =</span> amb)</span>
<span id="cb59-6"><a href=""></a></span>
<span id="cb59-7"><a href=""></a><span class="co"># Sele√ß√£o forward</span></span>
<span id="cb59-8"><a href=""></a>cca_select <span class="ot">&lt;-</span> <span class="fu">ordistep</span>(cca_null,</span>
<span id="cb59-9"><a href=""></a>                       <span class="at">scope =</span> <span class="fu">formula</span>(cca_full),</span>
<span id="cb59-10"><a href=""></a>                       <span class="at">direction =</span> <span class="st">"forward"</span>,</span>
<span id="cb59-11"><a href=""></a>                       <span class="at">permutations =</span> <span class="dv">999</span>)</span>
<span id="cb59-12"><a href=""></a></span>
<span id="cb59-13"><a href=""></a><span class="co"># Ver vari√°veis selecionadas</span></span>
<span id="cb59-14"><a href=""></a>cca_select<span class="sc">$</span>anova</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="compara√ß√£o-rda-vs-cca" class="slide level2">
<h2>Compara√ß√£o: RDA vs CCA</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th>Caracter√≠stica</th>
<th>RDA</th>
<th>CCA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Gradiente</td>
<td>Curto (&lt; 3 SD)</td>
<td>Longo (&gt; 4 SD)</td>
</tr>
<tr class="even">
<td>Resposta</td>
<td>Linear</td>
<td>Unimodal</td>
</tr>
<tr class="odd">
<td>Dist√¢ncia</td>
<td>Euclidiana</td>
<td>Qui-quadrado</td>
</tr>
<tr class="even">
<td>Baseado em</td>
<td>PCA</td>
<td>CA</td>
</tr>
<tr class="odd">
<td>Zeros</td>
<td>Problema</td>
<td>Tolerado</td>
</tr>
<tr class="even">
<td>Varia√ß√£o (%)</td>
<td>R¬≤ ajustado</td>
<td>In√©rcia explicada</td>
</tr>
</tbody>
</table>
<p><strong>Regra pr√°tica:</strong> DCA primeiro ‚Üí se &lt; 3 SD use RDA, se &gt; 4 SD use CCA</p>
</section>
<section id="parti√ß√£o-da-vari√¢ncia" class="slide level2">
<h2>üß© Parti√ß√£o da Vari√¢ncia</h2>
<p><strong>Pergunta central:</strong> <em>Quanto cada grupo de vari√°veis explica da vegeta√ß√£o?</em></p>
<p><strong>Situa√ß√£o comum:</strong></p>
<ul>
<li>Dados de solo (pH, nutrientes)</li>
<li>Dados de topografia (altitude, declividade)</li>
<li>Dados espaciais (coordenadas)</li>
</ul>
<p><strong>Objetivo:</strong> Separar efeitos independentes de cada grupo!</p>
</section>
<section id="por-que-particionar" class="slide level2">
<h2>Por que Particionar?</h2>
<p><strong>Problema:</strong> Vari√°veis correlacionadas confundem interpreta√ß√£o</p>
<p><strong>Exemplo:</strong></p>
<ul>
<li>Altitude correlacionada com temperatura</li>
<li>pH correlacionado com nutrientes</li>
<li>Ambos explicam vegeta√ß√£o ‚Üí mas quanto √© √∫nico de cada?</li>
</ul>
<p><strong>Parti√ß√£o separa:</strong></p>
<ul>
<li>Efeito <strong>puro</strong> de cada grupo</li>
<li>Efeito <strong>compartilhado</strong> entre grupos</li>
<li>Varia√ß√£o <strong>n√£o explicada</strong></li>
</ul>
</section>
<section id="estrutura-da-parti√ß√£o---2-grupos" class="slide level2">
<h2>Estrutura da Parti√ß√£o - 2 Grupos</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item" id="htmlwidget-8c58995904d666058c7e" style="width:768px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-8c58995904d666058c7e">{"x":{"diagram":"\ndigraph particao {\n  graph [rankdir = LR, bgcolor = transparent]\n  node [shape = box, style = filled, fontname = Arial, fontsize = 10]\n\n  TOTAL [label = \"Varia√ß√£o TOTAL\n(100%)\", fillcolor = \"#E8E8E8\"]\n\n  A [label = \"[a] Solo puro\", fillcolor = \"#FFB84D\"]\n  B [label = \"[b] Compartilhado\nSolo + Topo\", fillcolor = \"#FF6B6B\"]\n  C [label = \"[c] Topografia pura\", fillcolor = \"#4ECDC4\"]\n  D [label = \"[d] N√£o explicado\", fillcolor = \"#95E1D3\"]\n\n  TOTAL -> A\n  TOTAL -> B\n  TOTAL -> C\n  TOTAL -> D\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><strong>[a]</strong> = Efeito exclusivo do solo | <strong>[b]</strong> = Efeito compartilhado | <strong>[c]</strong> = Efeito exclusivo da topografia | <strong>[d]</strong> = Outros fatores (dispers√£o, hist√≥rico, etc.)</p>
</section>
<section id="parti√ß√£o-na-pr√°tica---setup" class="slide level2">
<h2>Parti√ß√£o na Pr√°tica - Setup</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href=""></a><span class="co"># Preparar grupos de vari√°veis</span></span>
<span id="cb60-2"><a href=""></a><span class="co"># Verificar nomes das colunas dispon√≠veis</span></span>
<span id="cb60-3"><a href=""></a><span class="fu">colnames</span>(amb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "arg"      "ph"       "P"        "K"        "Na"       "MO"      
 [7] "hal"      "Al"       "Ca"       "Mg"       "CTCph7"   "CTCef"   
[13] "V"        "SB"       "cd"       "cotmedia" "desmax"   "decmed"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href=""></a><span class="co"># Criar grupos de vari√°veis</span></span>
<span id="cb62-2"><a href=""></a>solo <span class="ot">&lt;-</span> amb[, <span class="fu">c</span>(<span class="st">"ph"</span>, <span class="st">"P"</span>, <span class="st">"K"</span>, <span class="st">"Ca"</span>, <span class="st">"Mg"</span>, <span class="st">"MO"</span>)]</span>
<span id="cb62-3"><a href=""></a>topo <span class="ot">&lt;-</span> amb[, <span class="fu">c</span>(<span class="st">"cotmedia"</span>, <span class="st">"desmax"</span>, <span class="st">"decmed"</span>)]</span>
<span id="cb62-4"><a href=""></a></span>
<span id="cb62-5"><a href=""></a><span class="co"># Verificar</span></span>
<span id="cb62-6"><a href=""></a><span class="fu">head</span>(solo, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ph   P  K  Ca  Mg  MO
1 3.9 2.0 54 0.8 0.5 4.2
2 4.2 1.7 95 2.8 1.2 7.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href=""></a><span class="fu">head</span>(topo, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  cotmedia desmax decmed
1  1000.25      4      8
2  1009.25      5      9</code></pre>
</div>
</div>
</section>
<section id="executar-parti√ß√£o-com-varpart" class="slide level2">
<h2>Executar Parti√ß√£o com varpart()</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href=""></a><span class="co"># Parti√ß√£o da vari√¢ncia</span></span>
<span id="cb66-2"><a href=""></a><span class="co"># Escolher RDA ou CCA baseado no DCA</span></span>
<span id="cb66-3"><a href=""></a><span class="co"># Aqui usamos RDA (assumindo gradiente curto)</span></span>
<span id="cb66-4"><a href=""></a></span>
<span id="cb66-5"><a href=""></a>part_result <span class="ot">&lt;-</span> <span class="fu">varpart</span>(matriz, solo, topo)</span>
<span id="cb66-6"><a href=""></a></span>
<span id="cb66-7"><a href=""></a><span class="co"># Ver resultados</span></span>
<span id="cb66-8"><a href=""></a>part_result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Partition of variance in RDA 

Call: varpart(Y = matriz, X = solo, topo)

Explanatory tables:
X1:  solo
X2:  topo 

No. of explanatory tables: 2 
Total variation (SS): 6814.4 
            Variance: 139.07 
No. of observations: 50 

Partition table:
                     Df R.squared Adj.R.squared Testable
[a+c] = X1            6   0.24147       0.13563     TRUE
[b+c] = X2            3   0.13997       0.08388     TRUE
[a+b+c] = X1+X2       9   0.33421       0.18440     TRUE
Individual fractions                                    
[a] = X1|X2           6                 0.10052     TRUE
[b] = X2|X1           3                 0.04877     TRUE
[c]                   0                 0.03511    FALSE
[d] = Residuals                         0.81560    FALSE
---
Use function 'rda' to test significance of fractions of interest</code></pre>
</div>
</div>
</section>
<section id="interpretando-varpart" class="slide level2">
<h2>Interpretando varpart()</h2>
<p><strong>Componentes da tabela:</strong></p>
<ul>
<li><strong>X1 (Individual)</strong> = Efeito puro do SOLO [a]</li>
<li><strong>X2 (Individual)</strong> = Efeito puro da TOPOGRAFIA [c]</li>
<li><strong>X1+X2 (Shared)</strong> = Efeito COMPARTILHADO [b]</li>
<li><strong>Residuals</strong> = N√ÉO explicado [d]</li>
</ul>
<p><strong>Valores negativos?</strong> ‚Üí Artefato estat√≠stico, considerar como zero</p>
</section>
<section id="visualizar-parti√ß√£o---diagrama-de-venn" class="slide level2">
<h2>Visualizar Parti√ß√£o - Diagrama de Venn</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href=""></a><span class="co"># Plotar diagrama de Venn</span></span>
<span id="cb68-2"><a href=""></a><span class="fu">plot</span>(part_result,</span>
<span id="cb68-3"><a href=""></a>     <span class="at">digits =</span> <span class="dv">2</span>,</span>
<span id="cb68-4"><a href=""></a>     <span class="at">bg =</span> <span class="fu">c</span>(<span class="st">"orange"</span>, <span class="st">"lightblue"</span>),</span>
<span id="cb68-5"><a href=""></a>     <span class="at">Xnames =</span> <span class="fu">c</span>(<span class="st">"Solo"</span>, <span class="st">"Topografia"</span>),</span>
<span id="cb68-6"><a href=""></a>     <span class="at">main =</span> <span class="st">"Parti√ß√£o da Vari√¢ncia - Vegeta√ß√£o"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ordenacoes_intro_files/figure-revealjs/unnamed-chunk-42-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"><p><strong>Interpreta√ß√£o visual:</strong> C√≠rculos = grupos de vari√°veis | Sobreposi√ß√£o = efeito compartilhado | Fora dos c√≠rculos = n√£o explicado</p>
</section>
<section id="exemplo-de-interpreta√ß√£o-ecol√≥gica" class="slide level2">
<h2>Exemplo de Interpreta√ß√£o Ecol√≥gica</h2>
<p><strong>Cen√°rio hipot√©tico dos nossos dados:</strong></p>
<ul>
<li><strong>[a] Solo puro = 13.6%</strong> ‚Üí Qu√≠mica do solo tem efeito independente</li>
<li><strong>[b] Compartilhado = 18.44%</strong> ‚Üí Solo e altitude covariam</li>
<li><strong>[c] Topografia pura = 8%</strong> ‚Üí Altitude tem efeito menor mas √∫nico</li>
<li><strong>[d] N√£o explicado = 81.56%</strong> ‚Üí Outros fatores importantes!</li>
</ul>
<p><strong>Conclus√£o:</strong> Solo √© mais importante que topografia para explicar composi√ß√£o flor√≠stica</p>
</section>
<section id="quando-usar-parti√ß√£o" class="slide level2">
<h2>Quando Usar Parti√ß√£o?</h2>
<p><strong>‚úÖ Use quando:</strong></p>
<ul>
<li>Tem m√∫ltiplos grupos de vari√°veis ambientais</li>
<li>Vari√°veis podem estar correlacionadas</li>
<li>Quer separar efeitos independentes</li>
<li>Precisa quantificar import√¢ncia relativa</li>
</ul>
<p><strong>‚ö†Ô∏è Cuidados:</strong></p>
<ul>
<li>Muitas vari√°veis ‚Üí overfitting</li>
<li>Selecione vari√°veis importantes antes (RDA/CCA com forward selection)</li>
<li>Valores negativos = considerar zero</li>
<li>Testar signific√¢ncia das fra√ß√µes</li>
</ul>
</section>
<section id="fluxo-completo-de-an√°lise" class="slide level2">
<h2>Fluxo Completo de An√°lise</h2>
<p><strong>Passo a passo recomendado:</strong></p>
<ol type="1">
<li><strong>DCA</strong> ‚Üí Verificar comprimento do gradiente</li>
<li><strong>RDA ou CCA</strong> ‚Üí Testar modelo completo</li>
<li><strong>Forward selection</strong> ‚Üí Selecionar vari√°veis importantes</li>
<li><strong>Parti√ß√£o</strong> ‚Üí Separar efeitos de grupos de vari√°veis</li>
<li><strong>Interpretar</strong> ‚Üí Conclus√µes ecol√≥gicas</li>
</ol>
</section>
<section id="resumo-dos-m√©todos" class="slide level2">
<h2>Resumo dos M√©todos</h2>
<p><strong>Explora√ß√£o:</strong></p>
<ul>
<li><strong>PCA</strong> (curto): Padr√µes ambientais</li>
<li><strong>DCA</strong> (longo): Diagn√≥stico, retorna SD</li>
<li><strong>NMDS</strong>: Dissimilaridade (stress &lt; 0.2)</li>
</ul>
<p><strong>Teste:</strong></p>
<ul>
<li><strong>RDA</strong> (curto): Ambiente explica vegeta√ß√£o? (R¬≤)</li>
<li><strong>CCA</strong> (longo): Idem, para gradientes longos</li>
<li><strong>varpart</strong>: Quanto cada grupo explica?</li>
</ul>
</section>
<section id="resumo-final-escolha-do-m√©todo" class="slide level2">
<h2>Resumo Final: Escolha do M√©todo üéØ</h2>
<p><strong>Fluxograma de decis√£o:</strong></p>
<ol type="1">
<li><strong>Rode DCA primeiro!</strong>
<ul>
<li>&lt; 3 SD ‚Üí m√©todos lineares (PCA/RDA)</li>
<li>&gt; 4 SD ‚Üí m√©todos unimodais (CA/CCA)</li>
</ul></li>
<li><strong>Tem vari√°veis explicativas?</strong>
<ul>
<li>N√ÉO ‚Üí ordena√ß√£o n√£o-restrita (PCA/DCA/NMDS)</li>
<li>SIM ‚Üí ordena√ß√£o restrita (RDA/CCA)</li>
</ul></li>
<li><strong>M√∫ltiplos grupos de vari√°veis?</strong>
<ul>
<li>SIM ‚Üí Parti√ß√£o da vari√¢ncia</li>
</ul></li>
</ol>
</section>
<section id="workflow-recomendado" class="slide level2">
<h2>Workflow Recomendado üìã</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item" id="htmlwidget-0f313ca87e16c3f64064" style="width:864px;height:624px;"></div>
<script type="application/json" data-for="htmlwidget-0f313ca87e16c3f64064">{"x":{"diagram":"\ndigraph workflow {\n  graph [rankdir = TB, bgcolor = transparent]\n  node [shape = box, style = filled, fontname = Arial, fontsize = 9]\n\n  START [label = \"1. Carregar dados\nveg + ambiente\", fillcolor = \"#E8E8E8\"]\n  DCA [label = \"2. DCA\nDiagn√≥stico gradiente\", fillcolor = \"#FFE66D\"]\n  DECISAO [label = \"Gradiente < 3 SD?\", fillcolor = \"#FF6B6B\", shape = diamond]\n\n  CURTO1 [label = \"3a. Explora√ß√£o\nPCA/NMDS\", fillcolor = \"#95E1D3\"]\n  CURTO2 [label = \"4a. Teste\nRDA + forward\", fillcolor = \"#4ECDC4\"]\n\n  LONGO1 [label = \"3b. Explora√ß√£o\nDCA/NMDS\", fillcolor = \"#95E1D3\"]\n  LONGO2 [label = \"4b. Teste\nCCA + forward\", fillcolor = \"#4ECDC4\"]\n\n  PART [label = \"5. Parti√ß√£o\nvarpart()\", fillcolor = \"#A8E6CF\"]\n  INTER [label = \"6. Interpreta√ß√£o\necol√≥gica\", fillcolor = \"#FFD3B6\", shape = ellipse]\n\n  START -> DCA\n  DCA -> DECISAO\n  DECISAO -> CURTO1 [label = \"Sim\"]\n  DECISAO -> LONGO1 [label = \"N√£o\"]\n  CURTO1 -> CURTO2\n  LONGO1 -> LONGO2\n  CURTO2 -> PART\n  LONGO2 -> PART\n  PART -> INTER\n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="obrigado" class="slide level2">
<h2>Obrigado!</h2>
<p><strong>Boas an√°lises!</strong> üå≥üìä</p>
<p><strong>Contato:</strong> Pedro Higuchi | UDESC Lages-SC</p>

</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p>Descri√ß√£o e An√°lise da Vegeta√ß√£o</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="ordenacoes_intro_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="ordenacoes_intro_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="ordenacoes_intro_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="ordenacoes_intro_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="ordenacoes_intro_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="ordenacoes_intro_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="ordenacoes_intro_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="ordenacoes_intro_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="ordenacoes_intro_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="ordenacoes_intro_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>